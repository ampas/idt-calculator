"""
Define the unit tests for the :class:`aces.idt.IDTGeneratorApplication`
class and its generators.
"""

from __future__ import annotations

import json
import os
import re

import numpy as np
from colour.constants import TOLERANCE_ABSOLUTE_TESTS

from aces.idt.application import IDTGeneratorApplication
from aces.idt.core.constants import DirectoryStructure
from aces.idt.framework.project_settings import IDTProjectSettings
from tests.test_utils import TestIDTBase

__author__ = "Alex Forsythe, Joshua Pines, Thomas Mansencal, Nick Shaw, Adam Davis"
__copyright__ = "Copyright 2022 Academy of Motion Picture Arts and Sciences"
__license__ = "Academy of Motion Picture Arts and Sciences License Terms"
__maintainer__ = "Academy of Motion Picture Arts and Sciences"
__email__ = "acessupport@oscars.org"
__status__ = "Production"

__all__ = [
    "TestIDTApplication",
]


class TestIDTApplication(TestIDTBase):
    """
    Define the unit tests for the :class:`aces.idt.IDTGeneratorApplication`
    class and its generators.
    """

    def setUp(self) -> None:
        """Initialise the common tests attributes."""

        self.maxDiff = None
        self.project_settings = IDTProjectSettings()

    def test__str__(self) -> None:
        """
        Test the :class:`aces.idt.IDTGeneratorLogCamera.__str__` and
        :class:`aces.idt.IDTProjectSettings.__str__ methods.
        """

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"

        self.assertEqual(
            re.sub(r"0x\w+>", "0x...>", str(idt_application.generator)).strip(),
            """
<aces.idt.generators.log_camera.IDTGeneratorLogCamera object at 0x...>
============================================================================

Baseline Exposure : 0
Samples Analysis  : None
LUT Decoding      : None
M                 : None
RGB_w             : None
k                 : None
NPM               : None
Primaries         : None
Whitepoint        : None
            """.strip(),
        )

        self.assertEqual(
            "\n".join(
                [
                    line.strip()
                    for line in re.sub(
                        r"0x\w+>", "0x...>", str(idt_application.project_settings)
                    )
                    .strip()
                    .splitlines()
                ]
            ),
            """
<aces.idt.framework.project_settings.IDTProjectSettings object at 0x...>
==============================================================================

Aces_Transform_Id              :
Aces_User_Name                 :
Additional_Camera_Settings     :
Camera_Make                    :
Camera_Model                   :
Cat                            : CAT02
Cleanup                        : True
Data                           : {'colour_checker': {}, 'grey_card': {}}
Debayering_Platform            :
Debayering_Settings            :
Decoding_Method                : Median
Encoding_Colourspace           :
Encoding_Transfer_Function     :
Ev_Range                       : [-1.  0.  1.]
Ev_Weights                     : []
File_Type                      :
Flatten_Clf                    : False
Grey_Card_Reference            : [ 0.18  0.18  0.18]
Illuminant                     : D60
Illuminant_Interpolator        : Linear
Include_Exposure_Factor_In_Clf : False
Include_White_Balance_In_Clf   : False
Iso                            : 800
Lighting_Setup_Description     :
Lut_Size                       : 1024
Lut_Smoothing                  : 16
Optimisation_Space             : Oklab
Optimization_Kwargs            : {}
Reference_Colour_Checker       : ISO 17321-1
Rgb_Display_Colourspace        : sRGB
Schema_Version                 : 0.1.0
Temperature                    : 6000
Working_Directory              :
            """.strip(),
        )

    def test_log_camera_generator_sample(self) -> None:
        """Test the :class:`aces.idt.IDTGeneratorLogCamera.sample` method."""

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"
        archive = os.path.join(self.get_test_resources_folder(), "synthetic_001.zip")
        working_directory = idt_application.extract(archive)
        idt_application.project_settings.working_directory = working_directory
        idt_application.validate_project_settings()

        generator = idt_application.generator
        generator.sample()
        expected_file = os.path.join(
            self.get_test_resources_folder(), "samples_analysis.json"
        )
        with open(expected_file) as file:
            expected = json.load(file)

        colour_checkers_result = generator.samples_analysis.get(
            DirectoryStructure.COLOUR_CHECKER
        )
        expected_colour_checkers = expected.get(DirectoryStructure.COLOUR_CHECKER)
        for key in colour_checkers_result:
            a = colour_checkers_result[key]
            e = expected_colour_checkers[str(key)]
            self.assertEqual(a, e)

        grey_result = generator.samples_analysis.get(DirectoryStructure.GREY_CARD)
        grey_expected = expected.get(DirectoryStructure.GREY_CARD)
        self.assertEqual(grey_result, grey_expected)

    def test_log_camera_generator_sort(self) -> None:
        """Test the :class:`aces.idt.IDTGeneratorLogCamera.sort` method."""

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"
        archive = os.path.join(self.get_test_resources_folder(), "synthetic_001.zip")
        working_dir = idt_application.extract(archive)
        idt_application.project_settings.working_directory = working_dir
        idt_application.validate_project_settings()

        generator = idt_application.generator
        generator.sample()
        generator.sort()

        camera_expected_file = os.path.join(
            self.get_test_resources_folder(), "samples_camera.json"
        )
        reference_expected_file = os.path.join(
            self.get_test_resources_folder(), "samples_reference.json"
        )
        with open(camera_expected_file) as file:
            expected_camera = json.load(file)

        with open(reference_expected_file) as file:
            expected_reference = json.load(file)

        np.testing.assert_allclose(
            generator.samples_camera.tolist(),
            expected_camera,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )
        np.testing.assert_allclose(
            generator.samples_reference,
            expected_reference,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

    def test_log_camera_generator_process_archive(self) -> None:
        """
        Test the :class:`aces.idt.IDTGeneratorLogCamera.process_archive`
        method.
        """

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"
        archive = os.path.join(self.get_test_resources_folder(), "synthetic_001.zip")

        idt_generator_1 = idt_application.process_archive(archive)
        np.testing.assert_allclose(
            idt_generator_1.LUT_decoding.table,
            np.array(
                [
                    -0.01754712,
                    -0.01736907,
                    -0.01718998,
                    -0.01700999,
                    -0.01682921,
                    -0.01664774,
                    -0.01646567,
                    -0.01628310,
                    -0.01610008,
                    -0.01591669,
                    -0.01573298,
                    -0.01554900,
                    -0.01536478,
                    -0.01518037,
                    -0.01499580,
                    -0.01481110,
                    -0.01462628,
                    -0.01444136,
                    -0.01425637,
                    -0.01407132,
                    -0.01388621,
                    -0.01370106,
                    -0.01351588,
                    -0.01333066,
                    -0.01314543,
                    -0.01296017,
                    -0.01277491,
                    -0.01258963,
                    -0.01240434,
                    -0.01221904,
                    -0.01203374,
                    -0.01184843,
                    -0.01166312,
                    -0.01147781,
                    -0.01129250,
                    -0.01110719,
                    -0.01092188,
                    -0.01073657,
                    -0.01055125,
                    -0.01036594,
                    -0.01018063,
                    -0.00999532,
                    -0.00981001,
                    -0.00962470,
                    -0.00943938,
                    -0.00925407,
                    -0.00906876,
                    -0.00888345,
                    -0.00869814,
                    -0.00851283,
                    -0.00832751,
                    -0.00814220,
                    -0.00795689,
                    -0.00777158,
                    -0.00758627,
                    -0.00740096,
                    -0.00721565,
                    -0.00703033,
                    -0.00684502,
                    -0.00665971,
                    -0.00647440,
                    -0.00628909,
                    -0.00610378,
                    -0.00591846,
                    -0.00573315,
                    -0.00554784,
                    -0.00536253,
                    -0.00517722,
                    -0.00499191,
                    -0.00480660,
                    -0.00462128,
                    -0.00443597,
                    -0.00425066,
                    -0.00406535,
                    -0.00388004,
                    -0.00369473,
                    -0.00350942,
                    -0.00332411,
                    -0.00313880,
                    -0.00295349,
                    -0.00276818,
                    -0.00258288,
                    -0.00239758,
                    -0.00221228,
                    -0.00202699,
                    -0.00184170,
                    -0.00165642,
                    -0.00147114,
                    -0.00128588,
                    -0.00110062,
                    -0.00091538,
                    -0.00073016,
                    -0.00054496,
                    -0.00035978,
                    -0.00017462,
                    0.00001070,
                    0.00019775,
                    0.00038204,
                    0.00056628,
                    0.00075052,
                    0.00093537,
                    0.00112013,
                    0.00130481,
                    0.00148937,
                    0.00167380,
                    0.00185810,
                    0.00204223,
                    0.00222619,
                    0.00240994,
                    0.00259346,
                    0.00277674,
                    0.00295974,
                    0.00314243,
                    0.00332480,
                    0.00350681,
                    0.00368842,
                    0.00386962,
                    0.00405037,
                    0.00423065,
                    0.00441042,
                    0.00458967,
                    0.00476838,
                    0.00494651,
                    0.00512407,
                    0.00530104,
                    0.00547741,
                    0.00565320,
                    0.00582840,
                    0.00600303,
                    0.00617712,
                    0.00635070,
                    0.00652382,
                    0.00669651,
                    0.00686885,
                    0.00704089,
                    0.00721287,
                    0.00738610,
                    0.00755938,
                    0.00773281,
                    0.00790649,
                    0.00808054,
                    0.00825505,
                    0.00843014,
                    0.00860593,
                    0.00878252,
                    0.00896003,
                    0.00913858,
                    0.00931825,
                    0.00949916,
                    0.00968140,
                    0.00986505,
                    0.01005017,
                    0.01023684,
                    0.01042510,
                    0.01061499,
                    0.01080654,
                    0.01099975,
                    0.01119461,
                    0.01139111,
                    0.01158923,
                    0.01178890,
                    0.01199009,
                    0.01219271,
                    0.01239669,
                    0.01260196,
                    0.01280841,
                    0.01301596,
                    0.01322449,
                    0.01343393,
                    0.01364416,
                    0.01385510,
                    0.01406665,
                    0.01427876,
                    0.01449133,
                    0.01470434,
                    0.01491772,
                    0.01513147,
                    0.01534557,
                    0.01556004,
                    0.01577491,
                    0.01599025,
                    0.01620612,
                    0.01642262,
                    0.01663988,
                    0.01685803,
                    0.01707725,
                    0.01729770,
                    0.01751958,
                    0.01774312,
                    0.01796854,
                    0.01819609,
                    0.01842600,
                    0.01865855,
                    0.01889400,
                    0.01913260,
                    0.01937461,
                    0.01962030,
                    0.01986990,
                    0.02012363,
                    0.02038172,
                    0.02064437,
                    0.02091177,
                    0.02118406,
                    0.02146137,
                    0.02174380,
                    0.02203142,
                    0.02232426,
                    0.02262232,
                    0.02292556,
                    0.02323391,
                    0.02354728,
                    0.02386552,
                    0.02418846,
                    0.02451590,
                    0.02484761,
                    0.02518333,
                    0.02552277,
                    0.02586564,
                    0.02621160,
                    0.02656071,
                    0.02691411,
                    0.02726953,
                    0.02762657,
                    0.02798488,
                    0.02834409,
                    0.02870384,
                    0.02906381,
                    0.02942368,
                    0.02978316,
                    0.03014201,
                    0.03050001,
                    0.03085696,
                    0.03121274,
                    0.03156724,
                    0.03192041,
                    0.03227225,
                    0.03262281,
                    0.03297219,
                    0.03332055,
                    0.03366810,
                    0.03401507,
                    0.03436179,
                    0.03470861,
                    0.03505593,
                    0.03540420,
                    0.03575389,
                    0.03610553,
                    0.03645968,
                    0.03681696,
                    0.03718013,
                    0.03754759,
                    0.03791994,
                    0.03829776,
                    0.03868162,
                    0.03907209,
                    0.03946970,
                    0.03987495,
                    0.04028829,
                    0.04071014,
                    0.04114083,
                    0.04158066,
                    0.04202984,
                    0.04248850,
                    0.04295669,
                    0.04343437,
                    0.04392141,
                    0.04441762,
                    0.04492272,
                    0.04543632,
                    0.04595797,
                    0.04648711,
                    0.04702314,
                    0.04756534,
                    0.04811299,
                    0.04866529,
                    0.04922140,
                    0.04978046,
                    0.05034161,
                    0.05090397,
                    0.05146667,
                    0.05202889,
                    0.05259002,
                    0.05314980,
                    0.05370642,
                    0.05425921,
                    0.05480755,
                    0.05535149,
                    0.05589166,
                    0.05642704,
                    0.05695754,
                    0.05748317,
                    0.05800407,
                    0.05852051,
                    0.05903283,
                    0.05954153,
                    0.06004718,
                    0.06055044,
                    0.06105207,
                    0.06155291,
                    0.06205382,
                    0.06255573,
                    0.06305960,
                    0.06356640,
                    0.06407713,
                    0.06459275,
                    0.06511423,
                    0.06564251,
                    0.06617846,
                    0.06672292,
                    0.06727669,
                    0.06784047,
                    0.06841492,
                    0.06900064,
                    0.06959813,
                    0.07020785,
                    0.07083020,
                    0.07146551,
                    0.07211407,
                    0.07277612,
                    0.07345183,
                    0.07414138,
                    0.07484490,
                    0.07556250,
                    0.07629430,
                    0.07704037,
                    0.07780082,
                    0.07857576,
                    0.07936527,
                    0.08016947,
                    0.08098844,
                    0.08182228,
                    0.08267110,
                    0.08353499,
                    0.08441401,
                    0.08530818,
                    0.08621750,
                    0.08714192,
                    0.08808138,
                    0.08903574,
                    0.09000477,
                    0.09098818,
                    0.09198556,
                    0.09299645,
                    0.09402025,
                    0.09505630,
                    0.09610382,
                    0.09716198,
                    0.09822984,
                    0.09930640,
                    0.10039060,
                    0.10148133,
                    0.10257744,
                    0.10367779,
                    0.10478123,
                    0.10588665,
                    0.10699298,
                    0.10809921,
                    0.10920446,
                    0.11030792,
                    0.11140893,
                    0.11250695,
                    0.11360161,
                    0.11469268,
                    0.11578013,
                    0.11686407,
                    0.11794480,
                    0.11902279,
                    0.12009865,
                    0.12117318,
                    0.12224728,
                    0.12332199,
                    0.12439845,
                    0.12547787,
                    0.12656153,
                    0.12765074,
                    0.12874684,
                    0.12985118,
                    0.13096507,
                    0.13208981,
                    0.13322662,
                    0.13437668,
                    0.13554106,
                    0.13672078,
                    0.13791673,
                    0.13912975,
                    0.14036055,
                    0.14160979,
                    0.14287802,
                    0.14416575,
                    0.14547341,
                    0.14680138,
                    0.14815001,
                    0.14951962,
                    0.15091051,
                    0.15232296,
                    0.15375726,
                    0.15521370,
                    0.15669260,
                    0.15819431,
                    0.15971920,
                    0.16126764,
                    0.16284004,
                    0.16443681,
                    0.16605832,
                    0.16770497,
                    0.16937709,
                    0.17107500,
                    0.17279887,
                    0.17454884,
                    0.17632495,
                    0.17812713,
                    0.17995523,
                    0.18180890,
                    0.18368763,
                    0.18559074,
                    0.18751738,
                    0.18946652,
                    0.19143694,
                    0.19342730,
                    0.19543607,
                    0.19746162,
                    0.19950217,
                    0.20155587,
                    0.20362081,
                    0.20569503,
                    0.20777658,
                    0.20986355,
                    0.21195410,
                    0.21404649,
                    0.21613915,
                    0.21823066,
                    0.22031982,
                    0.22240566,
                    0.22448746,
                    0.22656478,
                    0.22863746,
                    0.23070563,
                    0.23276974,
                    0.23483050,
                    0.23688890,
                    0.23894620,
                    0.24100388,
                    0.24306363,
                    0.24512734,
                    0.24719700,
                    0.24927472,
                    0.25136267,
                    0.25346307,
                    0.25557809,
                    0.25770988,
                    0.25986046,
                    0.26203176,
                    0.26422555,
                    0.26644342,
                    0.26868677,
                    0.27095678,
                    0.27325442,
                    0.27558042,
                    0.27793530,
                    0.28031936,
                    0.28273269,
                    0.28517517,
                    0.28764653,
                    0.29014637,
                    0.29267413,
                    0.29522911,
                    0.29781055,
                    0.30041762,
                    0.30304949,
                    0.30570533,
                    0.30838432,
                    0.31108572,
                    0.31380882,
                    0.31655302,
                    0.31931779,
                    0.32210274,
                    0.32490758,
                    0.32773219,
                    0.33057654,
                    0.33344079,
                    0.33632522,
                    0.33923024,
                    0.34215636,
                    0.34510424,
                    0.34807468,
                    0.35106865,
                    0.35408720,
                    0.35713146,
                    0.36020265,
                    0.36330208,
                    0.36643111,
                    0.36959111,
                    0.37278354,
                    0.37600988,
                    0.37927163,
                    0.38257032,
                    0.38590747,
                    0.38928460,
                    0.39270323,
                    0.39616486,
                    0.39967094,
                    0.40322294,
                    0.40682226,
                    0.41047026,
                    0.41416824,
                    0.41791745,
                    0.42171908,
                    0.42557427,
                    0.42948406,
                    0.43344940,
                    0.43747117,
                    0.44155014,
                    0.44568696,
                    0.44988218,
                    0.45413621,
                    0.45844935,
                    0.46282173,
                    0.46725334,
                    0.47174401,
                    0.47629343,
                    0.48090112,
                    0.48556645,
                    0.49028862,
                    0.49506668,
                    0.49989951,
                    0.50478588,
                    0.50972439,
                    0.51471354,
                    0.51975172,
                    0.52483723,
                    0.52996831,
                    0.53514314,
                    0.54035987,
                    0.54561666,
                    0.55091168,
                    0.55624315,
                    0.56160938,
                    0.56700874,
                    0.57243971,
                    0.57790088,
                    0.58339097,
                    0.58890890,
                    0.59445379,
                    0.60002494,
                    0.60562186,
                    0.61124425,
                    0.61689205,
                    0.62256538,
                    0.62826457,
                    0.63399016,
                    0.63974291,
                    0.64552375,
                    0.65133381,
                    0.65717438,
                    0.66304693,
                    0.66895305,
                    0.67489448,
                    0.68087306,
                    0.68689073,
                    0.69294953,
                    0.69905152,
                    0.70519887,
                    0.71139376,
                    0.71763836,
                    0.72393486,
                    0.73028542,
                    0.73669216,
                    0.74315714,
                    0.74968239,
                    0.75626988,
                    0.76292152,
                    0.76963911,
                    0.77642440,
                    0.78327904,
                    0.79020461,
                    0.79720258,
                    0.80427436,
                    0.81142128,
                    0.81864459,
                    0.82594547,
                    0.83332505,
                    0.84078441,
                    0.84832458,
                    0.85594657,
                    0.86365136,
                    0.87143991,
                    0.87931318,
                    0.88727211,
                    0.89531769,
                    0.90345089,
                    0.91167272,
                    0.91998418,
                    0.92838633,
                    0.93688024,
                    0.94546699,
                    0.95414772,
                    0.96292355,
                    0.97179562,
                    0.98076507,
                    0.98983303,
                    0.99900059,
                    1.00826884,
                    1.01763879,
                    1.02711143,
                    1.03668764,
                    1.04636823,
                    1.05615393,
                    1.06604533,
                    1.07604291,
                    1.08614703,
                    1.09635792,
                    1.10667569,
                    1.11710027,
                    1.12763142,
                    1.13826876,
                    1.14901175,
                    1.15985979,
                    1.17081216,
                    1.18186803,
                    1.19302650,
                    1.20428662,
                    1.21564738,
                    1.22710773,
                    1.23866666,
                    1.25032316,
                    1.26207632,
                    1.27392529,
                    1.28586934,
                    1.29790789,
                    1.31004050,
                    1.32226692,
                    1.33458710,
                    1.34700118,
                    1.35950954,
                    1.37211278,
                    1.38481171,
                    1.39760740,
                    1.41050110,
                    1.42349433,
                    1.43658876,
                    1.44978627,
                    1.46308891,
                    1.47649887,
                    1.49001848,
                    1.50365017,
                    1.51739646,
                    1.53125992,
                    1.54524317,
                    1.55934885,
                    1.57357961,
                    1.58793806,
                    1.60242680,
                    1.61704836,
                    1.63180523,
                    1.64669984,
                    1.66173451,
                    1.67691153,
                    1.69223309,
                    1.70770128,
                    1.72331815,
                    1.73908565,
                    1.75500566,
                    1.77108002,
                    1.78731047,
                    1.80369873,
                    1.82024647,
                    1.83695531,
                    1.85382685,
                    1.87086264,
                    1.88806425,
                    1.90543320,
                    1.92297101,
                    1.94067921,
                    1.95855931,
                    1.97661283,
                    1.99484127,
                    2.01324616,
                    2.03182903,
                    2.05059140,
                    2.06953481,
                    2.08866081,
                    2.10797095,
                    2.12746676,
                    2.14714983,
                    2.16702172,
                    2.18708398,
                    2.20733821,
                    2.22778597,
                    2.24842886,
                    2.26926846,
                    2.29030634,
                    2.31154409,
                    2.33298333,
                    2.35462566,
                    2.37647270,
                    2.39852608,
                    2.42078745,
                    2.44325843,
                    2.46594065,
                    2.48883574,
                    2.51194537,
                    2.53527119,
                    2.55881487,
                    2.58257811,
                    2.60656261,
                    2.63077008,
                    2.65520226,
                    2.67986091,
                    2.70474781,
                    2.72986476,
                    2.75521358,
                    2.78079612,
                    2.80661426,
                    2.83266993,
                    2.85896506,
                    2.88550164,
                    2.91228169,
                    2.93930726,
                    2.96658046,
                    2.99410343,
                    3.02187834,
                    3.04990741,
                    3.07819293,
                    3.10673720,
                    3.13554258,
                    3.16461149,
                    3.19394637,
                    3.22354973,
                    3.25342411,
                    3.28357210,
                    3.31399633,
                    3.34469949,
                    3.37568429,
                    3.40695349,
                    3.43850989,
                    3.47035633,
                    3.50249567,
                    3.53493080,
                    3.56766468,
                    3.60070024,
                    3.63404047,
                    3.66768838,
                    3.70164699,
                    3.73591934,
                    3.77050848,
                    3.80541750,
                    3.84064947,
                    3.87620750,
                    3.91209467,
                    3.94831411,
                    3.98486893,
                    4.02176226,
                    4.05899722,
                    4.09657698,
                    4.13450466,
                    4.17278343,
                    4.21141646,
                    4.25040694,
                    4.28975805,
                    4.32947301,
                    4.36955506,
                    4.41000744,
                    4.45083344,
                    4.49203637,
                    4.53361954,
                    4.57558634,
                    4.61794016,
                    4.66068443,
                    4.70382264,
                    4.74735830,
                    4.79129498,
                    4.83563626,
                    4.88038582,
                    4.92554734,
                    4.97112457,
                    5.01712130,
                    5.06354138,
                    5.11038869,
                    5.15766717,
                    5.20538082,
                    5.25353366,
                    5.30212979,
                    5.35117333,
                    5.40066846,
                    5.45061942,
                    5.50103046,
                    5.55190590,
                    5.60325011,
                    5.65506748,
                    5.70736246,
                    5.76013955,
                    5.81340326,
                    5.86715817,
                    5.92140891,
                    5.97616011,
                    6.03141648,
                    6.08718275,
                    6.14346371,
                    6.20026416,
                    6.25758898,
                    6.31544307,
                    6.37383136,
                    6.43275886,
                    6.49223058,
                    6.55225161,
                    6.61282706,
                    6.67396209,
                    6.73566192,
                    6.79793179,
                    6.86077700,
                    6.92420290,
                    6.98821489,
                    7.05281840,
                    7.11801893,
                    7.18382200,
                    7.25023322,
                    7.31725821,
                    7.38490268,
                    7.45317235,
                    7.52207301,
                    7.59161052,
                    7.66179078,
                    7.73261972,
                    7.80410337,
                    7.87624777,
                    7.94905905,
                    8.02254337,
                    8.09670697,
                    8.17155613,
                    8.24709718,
                    8.32333654,
                    8.40028066,
                    8.47793605,
                    8.55630930,
                    8.63540705,
                    8.71523599,
                    8.79580289,
                    8.87711457,
                    8.95917791,
                    9.04199987,
                    9.12558746,
                    9.20994776,
                    9.29508792,
                    9.38101513,
                    9.46773669,
                    9.55525993,
                    9.64359226,
                    9.73274117,
                    9.82271421,
                    9.91351898,
                    10.00516319,
                    10.09765459,
                    10.19100101,
                    10.28521036,
                    10.38029062,
                    10.47624983,
                    10.57309613,
                    10.67083771,
                    10.76948284,
                    10.86903989,
                    10.96951728,
                    11.07092352,
                    11.17326720,
                    11.27655697,
                    11.38080160,
                    11.48600990,
                    11.59219079,
                    11.69935325,
                    11.80750636,
                    11.91665928,
                    12.02682125,
                    12.13800159,
                    12.25020973,
                    12.36345516,
                    12.47774747,
                    12.59309634,
                    12.70951154,
                    12.82700293,
                    12.94558045,
                    13.06525414,
                    13.18603414,
                    13.30793067,
                    13.43095406,
                    13.55511473,
                    13.68042318,
                    13.80689002,
                    13.93452598,
                    14.06334184,
                    14.19334853,
                    14.32455705,
                    14.45697851,
                    14.59062412,
                    14.72550519,
                    14.86163316,
                    14.99901955,
                    15.13767598,
                    15.27761421,
                    15.41884608,
                    15.56138354,
                    15.70523868,
                    15.85042366,
                    15.99695079,
                    16.14483247,
                    16.29408122,
                    16.44470968,
                    16.59673061,
                    16.75015687,
                    16.90500146,
                    17.06127749,
                    17.21899819,
                    17.37817693,
                    17.53882717,
                    17.70096251,
                    17.86459670,
                    18.02974358,
                    18.19641714,
                    18.36463149,
                    18.53440088,
                    18.70573968,
                    18.87866239,
                    19.05318367,
                    19.22931828,
                    19.40708115,
                    19.58648733,
                    19.76755200,
                    19.95029049,
                    20.13471829,
                    20.32085101,
                    20.50870441,
                    20.69829439,
                    20.88963701,
                    21.08274848,
                    21.27728180,
                    21.47356356,
                    21.67165601,
                    21.87157585,
                    22.07333995,
                    22.27696530,
                    22.48246909,
                    22.68986864,
                    22.89918144,
                    23.11042514,
                    23.32361755,
                    23.53877665,
                    23.75592058,
                    23.97506765,
                    24.19623634,
                    24.41944530,
                    24.64471335,
                    24.87205948,
                    25.10150287,
                    25.33306287,
                    25.56675899,
                    25.80261094,
                    26.04063862,
                    26.28086209,
                    26.52330161,
                    26.76797762,
                    27.01491075,
                    27.26412183,
                    27.51563186,
                    27.76946206,
                    28.02563384,
                    28.28416878,
                    28.54508869,
                    28.80841557,
                    29.07417164,
                    29.34237928,
                    29.61306113,
                    29.88624000,
                    30.16193893,
                    30.44018117,
                    30.72099018,
                    31.00438964,
                    31.29040344,
                    31.57905570,
                    31.87037077,
                    32.16437320,
                    32.46108779,
                    32.76053955,
                    33.06275374,
                    33.36775584,
                    33.67557156,
                    33.98622687,
                    34.29974796,
                    34.61616126,
                    34.93549346,
                    35.25777148,
                    35.58302250,
                    35.91127394,
                    36.24255348,
                    36.57688905,
                    36.91430383,
                    37.25481983,
                    37.59846255,
                    37.94525696,
                    38.29522730,
                    38.64839681,
                    39.00478752,
                    39.36441991,
                    39.72731252,
                    40.09348154,
                    40.46294025,
                    40.83569844,
                    41.21176171,
                    41.59113066,
                    41.97379999,
                    42.35975743,
                    42.74898261,
                    43.14144568,
                    43.53710591,
                    43.93591002,
                    44.33779042,
                    44.74266328,
                    45.15042638,
                    45.56095695,
                    45.97410920,
                    46.38971184,
                    46.80756546,
                    47.22743983,
                    47.64907116,
                    48.07215935,
                    48.49636525,
                    48.92130808,
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.M,
            np.array(
                [
                    [0.7109112498683849, 0.20348583501092052, 0.08560291512069451],
                    [0.013798559260473948, 1.0251057640822967, -0.03890432334277061],
                    [-0.10581292048103687, -0.07130508739697004, 1.1771180078780068],
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )
        np.testing.assert_allclose(
            idt_generator_1.RGB_w,
            np.array([1.00246918, 1.00000000, 1.00537500]),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )
        np.testing.assert_allclose(
            idt_generator_1.k,
            1.1831303512964655,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        idt_application2 = IDTGeneratorApplication()
        idt_application2.generator = "IDTGeneratorLogCamera"
        archive2 = os.path.join(self.get_test_resources_folder(), "synthetic_002.zip")
        idt_generator_2 = idt_application2.process_archive(archive2)

        np.testing.assert_allclose(
            idt_generator_1.M,
            idt_generator_2.M,
            atol=0.025,
        )

        np.testing.assert_allclose(
            idt_generator_1.RGB_w,
            idt_generator_2.RGB_w,
            atol=0.0005,
        )

        np.testing.assert_allclose(
            idt_generator_1.k,
            idt_generator_2.k,
            atol=0.25,
        )

        idt_application3 = IDTGeneratorApplication()
        idt_application3.generator = "IDTGeneratorLogCamera"

        archive3 = os.path.join(self.get_test_resources_folder(), "synthetic_003.zip")
        idt_generator_3 = idt_application3.process_archive(archive3)

        np.testing.assert_allclose(
            idt_generator_3.M,
            np.array(
                [
                    [0.7068385747184197, 0.19921773631437803, 0.09394368896720229],
                    [0.013838799172565839, 1.0184775925258625, -0.03231639169842837],
                    [-0.11943812145687926, -0.06335980405037137, 1.1827979255072507],
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_3.RGB_w,
            np.array([0.5107967653752655, 1.0, 2.0026298241482303]),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_3.k,
            1.1842568704786522,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

    def test_raise_exception_log_camera_generator_process_archive(self) -> None:
        """
        Test that the :class:`aces.idt.IDTGeneratorLogCamera.process_archive`
        method raises an exception when the JSON file is missing and thus and IDT
        URN cannot be computed.
        """

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"

        archive = os.path.join(self.get_test_resources_folder(), "synthetic_004.zip")

        with self.assertRaises(ValueError):
            idt_application.process_archive(archive)

    def test_log_camera_generator_zip(self) -> None:
        """Test the :class:`aces.idt.IDTGeneratorLogCamera.zip` method."""

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"

        archive = os.path.join(self.get_test_resources_folder(), "synthetic_001.zip")
        idt_application.process_archive(archive)
        zip_file = idt_application.zip(
            self.get_test_output_folder(), archive_serialised_generator=False
        )
        self.assertEqual(os.path.exists(zip_file), True)

    def test_prelinearized_idt_generator_from_archive_zip(self) -> None:
        """Test the :class:`aces.idt.IDTGeneratorPreLinearizedCamera.zip` method."""

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorPreLinearizedCamera"

        archive = os.path.join(self.get_test_resources_folder(), "FULL_STOPS_EXR.zip")
        idt_application.process_archive(archive)
        idt_generator_1 = idt_application.generator
        np.testing.assert_allclose(
            idt_generator_1.LUT_decoding.table,
            np.array(
                [
                    0.0,
                    0.00047649,
                    0.00095297,
                    0.00142946,
                    0.00190595,
                    0.00238243,
                    0.00285892,
                    0.00333541,
                    0.00381189,
                    0.00428838,
                    0.00476487,
                    0.00524135,
                    0.00571784,
                    0.00619433,
                    0.00667081,
                    0.0071473,
                    0.00762379,
                    0.00810027,
                    0.00857676,
                    0.00905325,
                    0.00952973,
                    0.01000622,
                    0.01048271,
                    0.01095919,
                    0.01143568,
                    0.01191217,
                    0.01238865,
                    0.01286514,
                    0.01334163,
                    0.01381811,
                    0.0142946,
                    0.01477109,
                    0.01524757,
                    0.01572406,
                    0.01620055,
                    0.01667703,
                    0.01715352,
                    0.01763001,
                    0.01810649,
                    0.01858298,
                    0.01905947,
                    0.01953595,
                    0.02001244,
                    0.02048893,
                    0.02096541,
                    0.0214419,
                    0.02191839,
                    0.02239487,
                    0.02287136,
                    0.02334785,
                    0.02382433,
                    0.02430082,
                    0.02477731,
                    0.02525379,
                    0.02573028,
                    0.02620677,
                    0.02668325,
                    0.02715974,
                    0.02763623,
                    0.02811271,
                    0.0285892,
                    0.02906569,
                    0.02954217,
                    0.03001866,
                    0.03049515,
                    0.03097163,
                    0.03144812,
                    0.03192461,
                    0.03240109,
                    0.03287758,
                    0.03335407,
                    0.03383055,
                    0.03430704,
                    0.03478353,
                    0.03526001,
                    0.0357365,
                    0.03621299,
                    0.03668947,
                    0.03716596,
                    0.03764245,
                    0.03811893,
                    0.03859542,
                    0.03907191,
                    0.03954839,
                    0.04002488,
                    0.04050137,
                    0.04097785,
                    0.04145434,
                    0.04193083,
                    0.04240731,
                    0.0428838,
                    0.04336029,
                    0.04383677,
                    0.04431326,
                    0.04478975,
                    0.04526623,
                    0.04574272,
                    0.04621921,
                    0.04669569,
                    0.04717218,
                    0.04764867,
                    0.04812515,
                    0.04860164,
                    0.04907813,
                    0.04955461,
                    0.0500311,
                    0.05050759,
                    0.05098407,
                    0.05146056,
                    0.05193705,
                    0.05241353,
                    0.05289002,
                    0.05336651,
                    0.05384299,
                    0.05431948,
                    0.05479597,
                    0.05527245,
                    0.05574894,
                    0.05622543,
                    0.05670191,
                    0.0571784,
                    0.05765489,
                    0.05813137,
                    0.05860786,
                    0.05908435,
                    0.05956083,
                    0.06003732,
                    0.06051381,
                    0.06099029,
                    0.06146678,
                    0.06194327,
                    0.06241975,
                    0.06289624,
                    0.06337273,
                    0.06384921,
                    0.0643257,
                    0.06480219,
                    0.06527867,
                    0.06575516,
                    0.06623165,
                    0.06670813,
                    0.06718462,
                    0.06766111,
                    0.06813759,
                    0.06861408,
                    0.06909057,
                    0.06956705,
                    0.07004354,
                    0.07052003,
                    0.07099651,
                    0.071473,
                    0.07194949,
                    0.07242597,
                    0.07290246,
                    0.07337895,
                    0.07385543,
                    0.07433192,
                    0.07480841,
                    0.07528489,
                    0.07576138,
                    0.07623787,
                    0.07671435,
                    0.07719084,
                    0.07766733,
                    0.07814381,
                    0.0786203,
                    0.07909679,
                    0.07957327,
                    0.08004976,
                    0.08052625,
                    0.08100273,
                    0.08147922,
                    0.08195571,
                    0.08243219,
                    0.08290868,
                    0.08338517,
                    0.08386165,
                    0.08433814,
                    0.08481463,
                    0.08529111,
                    0.0857676,
                    0.08624409,
                    0.08672057,
                    0.08719706,
                    0.08767355,
                    0.08815003,
                    0.08862652,
                    0.08910301,
                    0.08957949,
                    0.09005598,
                    0.09053247,
                    0.09100895,
                    0.09148544,
                    0.09196193,
                    0.09243841,
                    0.0929149,
                    0.09339139,
                    0.09386787,
                    0.09434436,
                    0.09482085,
                    0.09529733,
                    0.09577382,
                    0.09625031,
                    0.09672679,
                    0.09720328,
                    0.09767977,
                    0.09815625,
                    0.09863274,
                    0.09910923,
                    0.09958571,
                    0.1000622,
                    0.10053869,
                    0.10101517,
                    0.10149166,
                    0.10196815,
                    0.10244463,
                    0.10292112,
                    0.10339761,
                    0.10387409,
                    0.10435058,
                    0.10482707,
                    0.10530355,
                    0.10578004,
                    0.10625653,
                    0.10673301,
                    0.1072095,
                    0.10768598,
                    0.10816247,
                    0.10863896,
                    0.10911544,
                    0.10959193,
                    0.11006842,
                    0.1105449,
                    0.11102139,
                    0.11149788,
                    0.11197436,
                    0.11245085,
                    0.11292734,
                    0.11340382,
                    0.11388031,
                    0.1143568,
                    0.11483328,
                    0.11530977,
                    0.11578626,
                    0.11626274,
                    0.11673923,
                    0.11721572,
                    0.1176922,
                    0.11816869,
                    0.11864518,
                    0.11912166,
                    0.11959815,
                    0.12007464,
                    0.12055112,
                    0.12102761,
                    0.1215041,
                    0.12198058,
                    0.12245707,
                    0.12293356,
                    0.12341004,
                    0.12388653,
                    0.12436302,
                    0.1248395,
                    0.12531599,
                    0.12579248,
                    0.12626896,
                    0.12674545,
                    0.12722194,
                    0.12769842,
                    0.12817491,
                    0.1286514,
                    0.12912788,
                    0.12960437,
                    0.13008086,
                    0.13055734,
                    0.13103383,
                    0.13151032,
                    0.1319868,
                    0.13246329,
                    0.13293978,
                    0.13341626,
                    0.13389275,
                    0.13436924,
                    0.13484572,
                    0.13532221,
                    0.1357987,
                    0.13627518,
                    0.13675167,
                    0.13722816,
                    0.13770464,
                    0.13818113,
                    0.13865762,
                    0.1391341,
                    0.13961059,
                    0.14008708,
                    0.14056356,
                    0.14104005,
                    0.14151654,
                    0.14199302,
                    0.14246951,
                    0.142946,
                    0.14342248,
                    0.14389897,
                    0.14437546,
                    0.14485194,
                    0.14532843,
                    0.14580492,
                    0.1462814,
                    0.14675789,
                    0.14723438,
                    0.14771086,
                    0.14818735,
                    0.14866384,
                    0.14914032,
                    0.14961681,
                    0.1500933,
                    0.15056978,
                    0.15104627,
                    0.15152276,
                    0.15199924,
                    0.15247573,
                    0.15295222,
                    0.1534287,
                    0.15390519,
                    0.15438168,
                    0.15485816,
                    0.15533465,
                    0.15581114,
                    0.15628762,
                    0.15676411,
                    0.1572406,
                    0.15771708,
                    0.15819357,
                    0.15867006,
                    0.15914654,
                    0.15962303,
                    0.16009952,
                    0.160576,
                    0.16105249,
                    0.16152898,
                    0.16200546,
                    0.16248195,
                    0.16295844,
                    0.16343492,
                    0.16391141,
                    0.1643879,
                    0.16486438,
                    0.16534087,
                    0.16581736,
                    0.16629384,
                    0.16677033,
                    0.16724682,
                    0.1677233,
                    0.16819979,
                    0.16867628,
                    0.16915276,
                    0.16962925,
                    0.17010574,
                    0.17058222,
                    0.17105871,
                    0.1715352,
                    0.17201168,
                    0.17248817,
                    0.17296466,
                    0.17344114,
                    0.17391763,
                    0.17439412,
                    0.1748706,
                    0.17534709,
                    0.17582358,
                    0.17630006,
                    0.17677655,
                    0.17725304,
                    0.17772952,
                    0.17820601,
                    0.1786825,
                    0.17915898,
                    0.17963547,
                    0.18011196,
                    0.18058844,
                    0.18106493,
                    0.18154142,
                    0.1820179,
                    0.18249439,
                    0.18297088,
                    0.18344736,
                    0.18392385,
                    0.18440034,
                    0.18487682,
                    0.18535331,
                    0.1858298,
                    0.18630628,
                    0.18678277,
                    0.18725926,
                    0.18773574,
                    0.18821223,
                    0.18868872,
                    0.1891652,
                    0.18964169,
                    0.19011818,
                    0.19059466,
                    0.19107115,
                    0.19154764,
                    0.19202412,
                    0.19250061,
                    0.1929771,
                    0.19345358,
                    0.19393007,
                    0.19440656,
                    0.19488304,
                    0.19535953,
                    0.19583602,
                    0.1963125,
                    0.19678899,
                    0.19726548,
                    0.19774196,
                    0.19821845,
                    0.19869494,
                    0.19917142,
                    0.19964791,
                    0.2001244,
                    0.20060088,
                    0.20107737,
                    0.20155386,
                    0.20203034,
                    0.20250683,
                    0.20298332,
                    0.2034598,
                    0.20393629,
                    0.20441278,
                    0.20488926,
                    0.20536575,
                    0.20584224,
                    0.20631872,
                    0.20679521,
                    0.2072717,
                    0.20774818,
                    0.20822467,
                    0.20870116,
                    0.20917764,
                    0.20965413,
                    0.21013062,
                    0.2106071,
                    0.21108359,
                    0.21156008,
                    0.21203656,
                    0.21251305,
                    0.21298954,
                    0.21346602,
                    0.21394251,
                    0.214419,
                    0.21489548,
                    0.21537197,
                    0.21584846,
                    0.21632494,
                    0.21680143,
                    0.21727792,
                    0.2177544,
                    0.21823089,
                    0.21870738,
                    0.21918386,
                    0.21966035,
                    0.22013684,
                    0.22061332,
                    0.22108981,
                    0.2215663,
                    0.22204278,
                    0.22251927,
                    0.22299576,
                    0.22347224,
                    0.22394873,
                    0.22442522,
                    0.2249017,
                    0.22537819,
                    0.22585468,
                    0.22633116,
                    0.22680765,
                    0.22728414,
                    0.22776062,
                    0.22823711,
                    0.2287136,
                    0.22919008,
                    0.22966657,
                    0.23014306,
                    0.23061954,
                    0.23109603,
                    0.23157252,
                    0.232049,
                    0.23252549,
                    0.23300198,
                    0.23347846,
                    0.23395495,
                    0.23443144,
                    0.23490792,
                    0.23538441,
                    0.2358609,
                    0.23633738,
                    0.23681387,
                    0.23729036,
                    0.23776684,
                    0.23824333,
                    0.23871982,
                    0.2391963,
                    0.23967279,
                    0.24014928,
                    0.24062576,
                    0.24110225,
                    0.24157874,
                    0.24205522,
                    0.24253171,
                    0.2430082,
                    0.24348468,
                    0.24396117,
                    0.24443766,
                    0.24491414,
                    0.24539063,
                    0.24586712,
                    0.2463436,
                    0.24682009,
                    0.24729658,
                    0.24777306,
                    0.24824955,
                    0.24872604,
                    0.24920252,
                    0.24967901,
                    0.2501555,
                    0.25063198,
                    0.25110847,
                    0.25158496,
                    0.25206144,
                    0.25253793,
                    0.25301442,
                    0.2534909,
                    0.25396739,
                    0.25444388,
                    0.25492036,
                    0.25539685,
                    0.25587334,
                    0.25634982,
                    0.25682631,
                    0.2573028,
                    0.25777928,
                    0.25825577,
                    0.25873226,
                    0.25920874,
                    0.25968523,
                    0.26016172,
                    0.2606382,
                    0.26111469,
                    0.26159118,
                    0.26206766,
                    0.26254415,
                    0.26302064,
                    0.26349712,
                    0.26397361,
                    0.2644501,
                    0.26492658,
                    0.26540307,
                    0.26587956,
                    0.26635604,
                    0.26683253,
                    0.26730902,
                    0.2677855,
                    0.26826199,
                    0.26873848,
                    0.26921496,
                    0.26969145,
                    0.27016794,
                    0.27064442,
                    0.27112091,
                    0.2715974,
                    0.27207388,
                    0.27255037,
                    0.27302686,
                    0.27350334,
                    0.27397983,
                    0.27445632,
                    0.2749328,
                    0.27540929,
                    0.27588578,
                    0.27636226,
                    0.27683875,
                    0.27731524,
                    0.27779172,
                    0.27826821,
                    0.2787447,
                    0.27922118,
                    0.27969767,
                    0.28017416,
                    0.28065064,
                    0.28112713,
                    0.28160362,
                    0.2820801,
                    0.28255659,
                    0.28303308,
                    0.28350956,
                    0.28398605,
                    0.28446254,
                    0.28493902,
                    0.28541551,
                    0.285892,
                    0.28636848,
                    0.28684497,
                    0.28732146,
                    0.28779794,
                    0.28827443,
                    0.28875092,
                    0.2892274,
                    0.28970389,
                    0.29018038,
                    0.29065686,
                    0.29113335,
                    0.29160984,
                    0.29208632,
                    0.29256281,
                    0.2930393,
                    0.29351578,
                    0.29399227,
                    0.29446876,
                    0.29494524,
                    0.29542173,
                    0.29589822,
                    0.2963747,
                    0.29685119,
                    0.29732768,
                    0.29780416,
                    0.29828065,
                    0.29875714,
                    0.29923362,
                    0.29971011,
                    0.3001866,
                    0.30066308,
                    0.30113957,
                    0.30161606,
                    0.30209254,
                    0.30256903,
                    0.30304552,
                    0.303522,
                    0.30399849,
                    0.30447498,
                    0.30495146,
                    0.30542795,
                    0.30590444,
                    0.30638092,
                    0.30685741,
                    0.3073339,
                    0.30781038,
                    0.30828687,
                    0.30876336,
                    0.30923984,
                    0.30971633,
                    0.31019282,
                    0.3106693,
                    0.31114579,
                    0.31162228,
                    0.31209876,
                    0.31257525,
                    0.31305174,
                    0.31352822,
                    0.31400471,
                    0.3144812,
                    0.31495768,
                    0.31543417,
                    0.31591066,
                    0.31638714,
                    0.31686363,
                    0.31734012,
                    0.3178166,
                    0.31829309,
                    0.31876958,
                    0.31924606,
                    0.31972255,
                    0.32019903,
                    0.32067552,
                    0.32115201,
                    0.32162849,
                    0.32210498,
                    0.32258147,
                    0.32305795,
                    0.32353444,
                    0.32401093,
                    0.32448741,
                    0.3249639,
                    0.32544039,
                    0.32591687,
                    0.32639336,
                    0.32686985,
                    0.32734633,
                    0.32782282,
                    0.32829931,
                    0.32877579,
                    0.32925228,
                    0.32972877,
                    0.33020525,
                    0.33068174,
                    0.33115823,
                    0.33163471,
                    0.3321112,
                    0.33258769,
                    0.33306417,
                    0.33354066,
                    0.33401715,
                    0.33449363,
                    0.33497012,
                    0.33544661,
                    0.33592309,
                    0.33639958,
                    0.33687607,
                    0.33735255,
                    0.33782904,
                    0.33830553,
                    0.33878201,
                    0.3392585,
                    0.33973499,
                    0.34021147,
                    0.34068796,
                    0.34116445,
                    0.34164093,
                    0.34211742,
                    0.34259391,
                    0.34307039,
                    0.34354688,
                    0.34402337,
                    0.34449985,
                    0.34497634,
                    0.34545283,
                    0.34592931,
                    0.3464058,
                    0.34688229,
                    0.34735877,
                    0.34783526,
                    0.34831175,
                    0.34878823,
                    0.34926472,
                    0.34974121,
                    0.35021769,
                    0.35069418,
                    0.35117067,
                    0.35164715,
                    0.35212364,
                    0.35260013,
                    0.35307661,
                    0.3535531,
                    0.35402959,
                    0.35450607,
                    0.35498256,
                    0.35545905,
                    0.35593553,
                    0.35641202,
                    0.35688851,
                    0.35736499,
                    0.35784148,
                    0.35831797,
                    0.35879445,
                    0.35927094,
                    0.35974743,
                    0.36022391,
                    0.3607004,
                    0.36117689,
                    0.36165337,
                    0.36212986,
                    0.36260635,
                    0.36308283,
                    0.36355932,
                    0.36403581,
                    0.36451229,
                    0.36498878,
                    0.36546527,
                    0.36594175,
                    0.36641824,
                    0.36689473,
                    0.36737121,
                    0.3678477,
                    0.36832419,
                    0.36880067,
                    0.36927716,
                    0.36975365,
                    0.37023013,
                    0.37070662,
                    0.37118311,
                    0.37165959,
                    0.37213608,
                    0.37261257,
                    0.37308905,
                    0.37356554,
                    0.37404203,
                    0.37451851,
                    0.374995,
                    0.37547149,
                    0.37594797,
                    0.37642446,
                    0.37690095,
                    0.37737743,
                    0.37785392,
                    0.37833041,
                    0.37880689,
                    0.37928338,
                    0.37975987,
                    0.38023635,
                    0.38071284,
                    0.38118933,
                    0.38166581,
                    0.3821423,
                    0.38261879,
                    0.38309527,
                    0.38357176,
                    0.38404825,
                    0.38452473,
                    0.38500122,
                    0.38547771,
                    0.38595419,
                    0.38643068,
                    0.38690717,
                    0.38738365,
                    0.38786014,
                    0.38833663,
                    0.38881311,
                    0.3892896,
                    0.38976609,
                    0.39024257,
                    0.39071906,
                    0.39119555,
                    0.39167203,
                    0.39214852,
                    0.39262501,
                    0.39310149,
                    0.39357798,
                    0.39405447,
                    0.39453095,
                    0.39500744,
                    0.39548393,
                    0.39596041,
                    0.3964369,
                    0.39691339,
                    0.39738987,
                    0.39786636,
                    0.39834285,
                    0.39881933,
                    0.39929582,
                    0.39977231,
                    0.40024879,
                    0.40072528,
                    0.40120177,
                    0.40167825,
                    0.40215474,
                    0.40263123,
                    0.40310771,
                    0.4035842,
                    0.40406069,
                    0.40453717,
                    0.40501366,
                    0.40549015,
                    0.40596663,
                    0.40644312,
                    0.40691961,
                    0.40739609,
                    0.40787258,
                    0.40834907,
                    0.40882555,
                    0.40930204,
                    0.40977853,
                    0.41025501,
                    0.4107315,
                    0.41120799,
                    0.41168447,
                    0.41216096,
                    0.41263745,
                    0.41311393,
                    0.41359042,
                    0.41406691,
                    0.41454339,
                    0.41501988,
                    0.41549637,
                    0.41597285,
                    0.41644934,
                    0.41692583,
                    0.41740231,
                    0.4178788,
                    0.41835529,
                    0.41883177,
                    0.41930826,
                    0.41978475,
                    0.42026123,
                    0.42073772,
                    0.42121421,
                    0.42169069,
                    0.42216718,
                    0.42264367,
                    0.42312015,
                    0.42359664,
                    0.42407313,
                    0.42454961,
                    0.4250261,
                    0.42550259,
                    0.42597907,
                    0.42645556,
                    0.42693205,
                    0.42740853,
                    0.42788502,
                    0.42836151,
                    0.42883799,
                    0.42931448,
                    0.42979097,
                    0.43026745,
                    0.43074394,
                    0.43122043,
                    0.43169691,
                    0.4321734,
                    0.43264989,
                    0.43312637,
                    0.43360286,
                    0.43407935,
                    0.43455583,
                    0.43503232,
                    0.43550881,
                    0.43598529,
                    0.43646178,
                    0.43693827,
                    0.43741475,
                    0.43789124,
                    0.43836773,
                    0.43884421,
                    0.4393207,
                    0.43979719,
                    0.44027367,
                    0.44075016,
                    0.44122665,
                    0.44170313,
                    0.44217962,
                    0.44265611,
                    0.44313259,
                    0.44360908,
                    0.44408557,
                    0.44456205,
                    0.44503854,
                    0.44551503,
                    0.44599151,
                    0.446468,
                    0.44694449,
                    0.44742097,
                    0.44789746,
                    0.44837395,
                    0.44885043,
                    0.44932692,
                    0.44980341,
                    0.45027989,
                    0.45075638,
                    0.45123287,
                    0.45170935,
                    0.45218584,
                    0.45266233,
                    0.45313881,
                    0.4536153,
                    0.45409179,
                    0.45456827,
                    0.45504476,
                    0.45552125,
                    0.45599773,
                    0.45647422,
                    0.45695071,
                    0.45742719,
                    0.45790368,
                    0.45838017,
                    0.45885665,
                    0.45933314,
                    0.45980963,
                    0.46028611,
                    0.4607626,
                    0.46123909,
                    0.46171557,
                    0.46219206,
                    0.46266855,
                    0.46314503,
                    0.46362152,
                    0.46409801,
                    0.46457449,
                    0.46505098,
                    0.46552747,
                    0.46600395,
                    0.46648044,
                    0.46695693,
                    0.46743341,
                    0.4679099,
                    0.46838639,
                    0.46886287,
                    0.46933936,
                    0.46981585,
                    0.47029233,
                    0.47076882,
                    0.47124531,
                    0.47172179,
                    0.47219828,
                    0.47267477,
                    0.47315125,
                    0.47362774,
                    0.47410423,
                    0.47458071,
                    0.4750572,
                    0.47553369,
                    0.47601017,
                    0.47648666,
                    0.47696315,
                    0.47743963,
                    0.47791612,
                    0.47839261,
                    0.47886909,
                    0.47934558,
                    0.47982207,
                    0.48029855,
                    0.48077504,
                    0.48125153,
                    0.48172801,
                    0.4822045,
                    0.48268099,
                    0.48315747,
                    0.48363396,
                    0.48411045,
                    0.48458693,
                    0.48506342,
                    0.48553991,
                    0.48601639,
                    0.48649288,
                    0.48696937,
                    0.48744585,
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.M,
            np.array(
                [
                    [0.73122826, 0.12587877, 0.14289297],
                    [0.00945003, 1.00713868, -0.0165887],
                    [-0.0451389, -0.19182707, 1.23696598],
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )
        np.testing.assert_allclose(
            idt_generator_1.RGB_w,
            np.array([0.91595656, 1.0, 0.98343745]),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )
        np.testing.assert_allclose(
            idt_generator_1.k,
            1.00277609957,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )
        zip_file = idt_application.zip(
            self.get_test_output_folder(), archive_serialised_generator=False
        )
        self.assertEqual(os.path.exists(zip_file), True)

    def test_tonemapped_idt_generator_from_archive_zip(self) -> None:
        """Test the :class:`aces.idt.IDTGeneratorToneMappedCamera.zip` method."""

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorToneMappedCamera"

        archive = os.path.join(self.get_test_resources_folder(), "PTZ_160.zip")
        idt_application.process_archive(archive)
        idt_generator_1 = idt_application.generator
        np.testing.assert_allclose(
            idt_generator_1.LUT_decoding.table,
            np.array(
                [
                    0.00265052,
                    0.00261188,
                    0.00257294,
                    0.00253542,
                    0.00250098,
                    0.00246969,
                    0.00244069,
                    0.00241433,
                    0.00239096,
                    0.00237078,
                    0.00235351,
                    0.00233877,
                    0.00232618,
                    0.00231582,
                    0.00230782,
                    0.00230181,
                    0.00229744,
                    0.00229474,
                    0.00229387,
                    0.00229457,
                    0.00229657,
                    0.00229987,
                    0.00230463,
                    0.00231064,
                    0.00231772,
                    0.00232587,
                    0.00233521,
                    0.0023456,
                    0.0023569,
                    0.00236912,
                    0.00238234,
                    0.00239648,
                    0.00241142,
                    0.00242718,
                    0.00244382,
                    0.00246127,
                    0.00247947,
                    0.00249842,
                    0.00251816,
                    0.00253866,
                    0.00255987,
                    0.0025818,
                    0.00260449,
                    0.0026279,
                    0.00265202,
                    0.00267687,
                    0.00270247,
                    0.00272877,
                    0.00275573,
                    0.00278334,
                    0.00281165,
                    0.00284062,
                    0.00287023,
                    0.00290047,
                    0.00293138,
                    0.00296293,
                    0.00299512,
                    0.00302794,
                    0.00306142,
                    0.00309555,
                    0.00313031,
                    0.00316571,
                    0.00320176,
                    0.00323846,
                    0.00327583,
                    0.00331387,
                    0.0033526,
                    0.00339199,
                    0.00343202,
                    0.00347268,
                    0.00351401,
                    0.00355598,
                    0.00359855,
                    0.00364172,
                    0.00368552,
                    0.00372993,
                    0.00377493,
                    0.00382052,
                    0.00386672,
                    0.00391352,
                    0.00396088,
                    0.0040088,
                    0.0040573,
                    0.00410636,
                    0.00415598,
                    0.00420615,
                    0.0042569,
                    0.0043082,
                    0.00436002,
                    0.00441237,
                    0.00446529,
                    0.00451873,
                    0.00457264,
                    0.00462701,
                    0.00468189,
                    0.00473723,
                    0.00479296,
                    0.00484905,
                    0.00490558,
                    0.00496248,
                    0.00501969,
                    0.00507718,
                    0.00513498,
                    0.00519309,
                    0.00525147,
                    0.00531009,
                    0.00536895,
                    0.00542811,
                    0.00548764,
                    0.00554756,
                    0.00560782,
                    0.00566847,
                    0.00572959,
                    0.0057912,
                    0.00585325,
                    0.00591579,
                    0.00597885,
                    0.00604247,
                    0.00610661,
                    0.00617129,
                    0.00623659,
                    0.00630252,
                    0.00636907,
                    0.00643624,
                    0.00650402,
                    0.00657244,
                    0.00664153,
                    0.00671123,
                    0.00678145,
                    0.00685216,
                    0.00692343,
                    0.00699521,
                    0.00706744,
                    0.00714008,
                    0.00721324,
                    0.0072868,
                    0.00736065,
                    0.00743471,
                    0.00750908,
                    0.0075837,
                    0.00765849,
                    0.00773339,
                    0.00780849,
                    0.00788371,
                    0.00795898,
                    0.00803422,
                    0.00810946,
                    0.00818473,
                    0.00826002,
                    0.00833535,
                    0.00841068,
                    0.00848604,
                    0.00856144,
                    0.00863688,
                    0.00871238,
                    0.0087879,
                    0.00886342,
                    0.00893894,
                    0.00901442,
                    0.00908991,
                    0.00916541,
                    0.00924094,
                    0.00931647,
                    0.00939201,
                    0.00946759,
                    0.00954321,
                    0.00961881,
                    0.00969446,
                    0.00977023,
                    0.00984615,
                    0.00992207,
                    0.00999815,
                    0.01007463,
                    0.01015168,
                    0.01022912,
                    0.01030701,
                    0.01038552,
                    0.01046476,
                    0.01054463,
                    0.01062515,
                    0.01070641,
                    0.01078846,
                    0.01087126,
                    0.01095483,
                    0.01103919,
                    0.01112437,
                    0.01121029,
                    0.01129704,
                    0.01138475,
                    0.01147352,
                    0.01156323,
                    0.01165396,
                    0.01174584,
                    0.01183897,
                    0.01193323,
                    0.0120287,
                    0.01212553,
                    0.01222382,
                    0.01232351,
                    0.01242463,
                    0.01252721,
                    0.01263135,
                    0.01273716,
                    0.01284447,
                    0.01295309,
                    0.01306284,
                    0.01317396,
                    0.01328634,
                    0.01339974,
                    0.01351397,
                    0.01362926,
                    0.01374551,
                    0.01386251,
                    0.01398008,
                    0.01409842,
                    0.01421745,
                    0.01433695,
                    0.01445676,
                    0.01457711,
                    0.01469786,
                    0.01481874,
                    0.01493951,
                    0.01506039,
                    0.01518129,
                    0.01530199,
                    0.01542227,
                    0.01554233,
                    0.01566209,
                    0.01578131,
                    0.0158998,
                    0.01601774,
                    0.01613503,
                    0.01625149,
                    0.01636692,
                    0.01648143,
                    0.016595,
                    0.01670751,
                    0.01681885,
                    0.0169291,
                    0.01703821,
                    0.01714608,
                    0.01725264,
                    0.01735794,
                    0.01746193,
                    0.0175645,
                    0.0176655,
                    0.01776476,
                    0.01786248,
                    0.01795898,
                    0.01805455,
                    0.01814887,
                    0.01824204,
                    0.01833442,
                    0.01842636,
                    0.01851757,
                    0.0186081,
                    0.01869825,
                    0.0187883,
                    0.01887802,
                    0.01896744,
                    0.01905685,
                    0.0191465,
                    0.01923613,
                    0.01932583,
                    0.01941592,
                    0.01950671,
                    0.01959789,
                    0.01968957,
                    0.01978217,
                    0.01987608,
                    0.01997101,
                    0.02006701,
                    0.02016448,
                    0.02026376,
                    0.02036463,
                    0.02046711,
                    0.02057153,
                    0.02067822,
                    0.020787,
                    0.02089788,
                    0.0210111,
                    0.0211269,
                    0.02124516,
                    0.0213659,
                    0.0214893,
                    0.02161555,
                    0.02174461,
                    0.02187646,
                    0.0220112,
                    0.0221489,
                    0.02228956,
                    0.02243319,
                    0.02257989,
                    0.02272974,
                    0.02288295,
                    0.02303939,
                    0.02319881,
                    0.02336095,
                    0.02352601,
                    0.02369402,
                    0.02386474,
                    0.02403789,
                    0.02421332,
                    0.02439129,
                    0.02457213,
                    0.02475621,
                    0.02494387,
                    0.02513482,
                    0.02532847,
                    0.02552427,
                    0.02572266,
                    0.02592367,
                    0.02612655,
                    0.02633053,
                    0.026536,
                    0.02674309,
                    0.02695112,
                    0.02715939,
                    0.02736829,
                    0.02757791,
                    0.02778749,
                    0.02799626,
                    0.02820469,
                    0.02841287,
                    0.02861974,
                    0.02882426,
                    0.02902622,
                    0.02922611,
                    0.02942406,
                    0.02962023,
                    0.02981451,
                    0.03000685,
                    0.03019738,
                    0.03038624,
                    0.03057337,
                    0.03075869,
                    0.03094232,
                    0.03112437,
                    0.03130477,
                    0.03148346,
                    0.03166057,
                    0.03183625,
                    0.03201046,
                    0.03218312,
                    0.0323543,
                    0.03252409,
                    0.03269245,
                    0.03285931,
                    0.03302477,
                    0.03318893,
                    0.03335178,
                    0.03351325,
                    0.03367336,
                    0.03383215,
                    0.03398959,
                    0.03414564,
                    0.03430034,
                    0.03445374,
                    0.03460579,
                    0.03475647,
                    0.03490583,
                    0.03505395,
                    0.0352008,
                    0.03534634,
                    0.03549062,
                    0.03563368,
                    0.03577549,
                    0.03591602,
                    0.03605532,
                    0.03619343,
                    0.03633033,
                    0.036466,
                    0.03660047,
                    0.0367338,
                    0.03686594,
                    0.03699684,
                    0.03712665,
                    0.03725555,
                    0.03738347,
                    0.03751032,
                    0.03763633,
                    0.03776174,
                    0.03788645,
                    0.03801029,
                    0.03813371,
                    0.03825719,
                    0.03838073,
                    0.03850405,
                    0.03862753,
                    0.0387516,
                    0.03887626,
                    0.03900123,
                    0.03912694,
                    0.03925379,
                    0.03938182,
                    0.03951073,
                    0.03964095,
                    0.03977295,
                    0.03990682,
                    0.04004226,
                    0.04017957,
                    0.04031906,
                    0.04046076,
                    0.04060445,
                    0.04075048,
                    0.0408992,
                    0.04105061,
                    0.04120443,
                    0.04136118,
                    0.04152139,
                    0.04168524,
                    0.04185235,
                    0.04202307,
                    0.04219778,
                    0.04237654,
                    0.04255909,
                    0.04274583,
                    0.04293719,
                    0.0431334,
                    0.04333424,
                    0.04353976,
                    0.04375001,
                    0.04396501,
                    0.0441848,
                    0.04440941,
                    0.04463891,
                    0.0448734,
                    0.04511291,
                    0.04535736,
                    0.04560667,
                    0.04586093,
                    0.04612035,
                    0.04638458,
                    0.04665328,
                    0.04692628,
                    0.04720391,
                    0.04748605,
                    0.04777261,
                    0.04806362,
                    0.04835932,
                    0.04865939,
                    0.04896347,
                    0.04927146,
                    0.04958371,
                    0.04989995,
                    0.05021988,
                    0.05054341,
                    0.05087085,
                    0.05120195,
                    0.05153642,
                    0.05187443,
                    0.05221663,
                    0.05256182,
                    0.05290863,
                    0.05325655,
                    0.05360686,
                    0.05395836,
                    0.05430963,
                    0.0546597,
                    0.05500939,
                    0.05535881,
                    0.055708,
                    0.05605701,
                    0.05640587,
                    0.05675441,
                    0.05710245,
                    0.05744994,
                    0.05779708,
                    0.05814358,
                    0.05848911,
                    0.05883345,
                    0.05917683,
                    0.05951913,
                    0.0598602,
                    0.06019986,
                    0.06053805,
                    0.06087504,
                    0.06121112,
                    0.06154653,
                    0.0618811,
                    0.06221473,
                    0.06254731,
                    0.06287878,
                    0.06320925,
                    0.06353857,
                    0.06386659,
                    0.06419318,
                    0.06451841,
                    0.06484228,
                    0.06516473,
                    0.06548577,
                    0.06580549,
                    0.0661237,
                    0.06644019,
                    0.0667548,
                    0.06706774,
                    0.06737882,
                    0.06768785,
                    0.06799464,
                    0.0682993,
                    0.06860182,
                    0.06890211,
                    0.06920012,
                    0.06949582,
                    0.06978925,
                    0.07008048,
                    0.07036955,
                    0.0706563,
                    0.07094085,
                    0.07122334,
                    0.07150386,
                    0.07178228,
                    0.07205863,
                    0.07233301,
                    0.07260546,
                    0.07287583,
                    0.07314423,
                    0.0734108,
                    0.07367566,
                    0.07393862,
                    0.07419978,
                    0.07445927,
                    0.07471715,
                    0.07497317,
                    0.07522755,
                    0.07548066,
                    0.07573272,
                    0.07598333,
                    0.07623276,
                    0.07648146,
                    0.07672974,
                    0.07697714,
                    0.07722395,
                    0.07747064,
                    0.07771759,
                    0.07796434,
                    0.07821112,
                    0.07845839,
                    0.07870649,
                    0.078955,
                    0.07920413,
                    0.07945433,
                    0.07970589,
                    0.07995834,
                    0.08021201,
                    0.08046745,
                    0.08072512,
                    0.08098456,
                    0.08124597,
                    0.0815098,
                    0.08177641,
                    0.08204546,
                    0.0823171,
                    0.08259164,
                    0.08286933,
                    0.08314982,
                    0.08343335,
                    0.08372037,
                    0.08401128,
                    0.08430585,
                    0.0846041,
                    0.08490615,
                    0.08521213,
                    0.0855219,
                    0.08583557,
                    0.08615338,
                    0.08647549,
                    0.08680146,
                    0.08713169,
                    0.08746687,
                    0.08780759,
                    0.08815326,
                    0.08850417,
                    0.08886103,
                    0.08922445,
                    0.08959383,
                    0.08996947,
                    0.09035212,
                    0.09074242,
                    0.09113965,
                    0.09154423,
                    0.0919571,
                    0.09237915,
                    0.09280978,
                    0.09324918,
                    0.09369801,
                    0.0941569,
                    0.09462544,
                    0.0951038,
                    0.09559258,
                    0.09609233,
                    0.09660297,
                    0.09712444,
                    0.09765684,
                    0.09820034,
                    0.09875554,
                    0.09932201,
                    0.09989889,
                    0.10048542,
                    0.10108257,
                    0.10169008,
                    0.10230687,
                    0.10293198,
                    0.10356676,
                    0.1042107,
                    0.10486215,
                    0.10551952,
                    0.10618445,
                    0.10685648,
                    0.10753358,
                    0.10821381,
                    0.10889825,
                    0.10958703,
                    0.11027901,
                    0.11097311,
                    0.11166985,
                    0.11236936,
                    0.11307106,
                    0.11377436,
                    0.11447966,
                    0.11518692,
                    0.11589564,
                    0.11660532,
                    0.11731619,
                    0.11802829,
                    0.1187413,
                    0.11945493,
                    0.12016932,
                    0.12088448,
                    0.12160016,
                    0.12231609,
                    0.12303228,
                    0.12374882,
                    0.12446567,
                    0.12518282,
                    0.12590066,
                    0.12661891,
                    0.12733686,
                    0.1280538,
                    0.12877024,
                    0.12948611,
                    0.13020056,
                    0.13091273,
                    0.13162329,
                    0.13233213,
                    0.13303806,
                    0.13373986,
                    0.13443837,
                    0.13513352,
                    0.13582379,
                    0.13650768,
                    0.13718584,
                    0.13785843,
                    0.13852412,
                    0.13918158,
                    0.13983165,
                    0.1404743,
                    0.1411078,
                    0.1417304,
                    0.14234276,
                    0.14294514,
                    0.143536,
                    0.14411379,
                    0.14467722,
                    0.14522742,
                    0.14576636,
                    0.14629602,
                    0.14681562,
                    0.14732456,
                    0.14782444,
                    0.14831689,
                    0.14880167,
                    0.14927811,
                    0.14974685,
                    0.15020855,
                    0.15066291,
                    0.1511097,
                    0.15154955,
                    0.15198312,
                    0.15241032,
                    0.15283085,
                    0.15324497,
                    0.15365296,
                    0.15405366,
                    0.15444728,
                    0.15483616,
                    0.15522264,
                    0.15560621,
                    0.1559859,
                    0.15636367,
                    0.15674149,
                    0.15711872,
                    0.15749458,
                    0.15787125,
                    0.15825094,
                    0.15863347,
                    0.15901784,
                    0.15940547,
                    0.15979779,
                    0.16019481,
                    0.16059583,
                    0.16100167,
                    0.16141317,
                    0.16182994,
                    0.16225161,
                    0.16267963,
                    0.16311541,
                    0.1635586,
                    0.1640085,
                    0.16446696,
                    0.16493586,
                    0.16541485,
                    0.16590299,
                    0.16640248,
                    0.16691555,
                    0.16744161,
                    0.16797949,
                    0.16853241,
                    0.16910368,
                    0.16969306,
                    0.17029872,
                    0.17092417,
                    0.171573,
                    0.17224455,
                    0.17293673,
                    0.17365467,
                    0.17440362,
                    0.17518663,
                    0.17600109,
                    0.17684486,
                    0.17771582,
                    0.17861428,
                    0.17954203,
                    0.18049655,
                    0.18147524,
                    0.18247811,
                    0.18350727,
                    0.18456027,
                    0.18563458,
                    0.1867306,
                    0.18785058,
                    0.18899087,
                    0.19014768,
                    0.19132089,
                    0.19251357,
                    0.19372164,
                    0.19494075,
                    0.19616903,
                    0.19740922,
                    0.19866116,
                    0.19992456,
                    0.20119857,
                    0.2024831,
                    0.20378037,
                    0.20509267,
                    0.20642139,
                    0.20776539,
                    0.20912427,
                    0.21049763,
                    0.211886,
                    0.21329017,
                    0.2147083,
                    0.21613842,
                    0.21758005,
                    0.21903485,
                    0.22050136,
                    0.22197796,
                    0.22346421,
                    0.22496151,
                    0.22646862,
                    0.22798412,
                    0.22950802,
                    0.23104186,
                    0.23258329,
                    0.23412969,
                    0.23567997,
                    0.23723605,
                    0.23879675,
                    0.24036067,
                    0.24192735,
                    0.24349799,
                    0.24507136,
                    0.24664605,
                    0.2482222,
                    0.24980169,
                    0.2513811,
                    0.25295665,
                    0.25452758,
                    0.25609794,
                    0.25766212,
                    0.25921381,
                    0.2607512,
                    0.26228073,
                    0.26379434,
                    0.26528289,
                    0.26674258,
                    0.26818162,
                    0.26959183,
                    0.27096361,
                    0.27228875,
                    0.27356988,
                    0.27481385,
                    0.27602751,
                    0.27721393,
                    0.27836638,
                    0.27949001,
                    0.28059119,
                    0.28167262,
                    0.28272766,
                    0.28376215,
                    0.28478324,
                    0.28579495,
                    0.2867913,
                    0.28777558,
                    0.28875218,
                    0.28972299,
                    0.29068301,
                    0.29163708,
                    0.29259116,
                    0.29354776,
                    0.29449978,
                    0.29545452,
                    0.29642094,
                    0.2974056,
                    0.29840331,
                    0.2994137,
                    0.30043737,
                    0.30147435,
                    0.30252345,
                    0.30358657,
                    0.304666,
                    0.30576345,
                    0.30687764,
                    0.30800868,
                    0.30915692,
                    0.31032288,
                    0.31150693,
                    0.31270827,
                    0.31392599,
                    0.31515931,
                    0.31640874,
                    0.31767471,
                    0.31895761,
                    0.32025785,
                    0.32157577,
                    0.32291075,
                    0.32426213,
                    0.32562855,
                    0.32700794,
                    0.32840478,
                    0.32982442,
                    0.33127024,
                    0.33273648,
                    0.33422783,
                    0.33575098,
                    0.33731062,
                    0.33890068,
                    0.3405252,
                    0.3421904,
                    0.343901,
                    0.34565231,
                    0.34744681,
                    0.34928878,
                    0.35118136,
                    0.35312097,
                    0.35511038,
                    0.35715389,
                    0.35925448,
                    0.36140758,
                    0.36361758,
                    0.36589096,
                    0.36823282,
                    0.37063847,
                    0.37311096,
                    0.37565553,
                    0.37827594,
                    0.38096641,
                    0.38373282,
                    0.38658395,
                    0.38952876,
                    0.39257021,
                    0.39570016,
                    0.3989093,
                    0.4021911,
                    0.40555967,
                    0.40900609,
                    0.41251494,
                    0.41607368,
                    0.41969692,
                    0.4233792,
                    0.4271079,
                    0.43087292,
                    0.4346876,
                    0.43854549,
                    0.44243322,
                    0.44634097,
                    0.45029005,
                    0.45426442,
                    0.45823633,
                    0.46218128,
                    0.46611654,
                    0.47003956,
                    0.47393738,
                    0.47779786,
                    0.48162414,
                    0.4854196,
                    0.48918521,
                    0.49292179,
                    0.49662815,
                    0.50030362,
                    0.50394799,
                    0.50756057,
                    0.51113654,
                    0.51467999,
                    0.51819767,
                    0.52169556,
                    0.52516753,
                    0.52861504,
                    0.5320436,
                    0.53545706,
                    0.53883958,
                    0.54220361,
                    0.54557218,
                    0.54896595,
                    0.5523644,
                    0.55577503,
                    0.55922098,
                    0.56272296,
                    0.56625805,
                    0.56983659,
                    0.57348715,
                    0.57723633,
                    0.58106676,
                    0.58498119,
                    0.58899829,
                    0.59313509,
                    0.59737304,
                    0.60172191,
                    0.60620813,
                    0.61085788,
                    0.6156741,
                    0.620644,
                    0.6257571,
                    0.63100398,
                    0.63640213,
                    0.64194511,
                    0.647612,
                    0.65338248,
                    0.65926528,
                    0.66526626,
                    0.67138139,
                    0.67760739,
                    0.68396038,
                    0.69043174,
                    0.69699915,
                    0.70364136,
                    0.71038198,
                    0.7172146,
                    0.72410795,
                    0.73103102,
                    0.73799109,
                    0.74499771,
                    0.75204688,
                    0.75913385,
                    0.76623591,
                    0.77337221,
                    0.78058239,
                    0.78790522,
                    0.79530957,
                    0.8028018,
                    0.81042994,
                    0.81824085,
                    0.82618049,
                    0.83426893,
                    0.84259634,
                    0.85125362,
                    0.86024656,
                    0.86953918,
                    0.87912122,
                    0.88898233,
                    0.89912304,
                    0.90955565,
                    0.92029134,
                    0.93134091,
                    0.94267075,
                    0.9543059,
                    0.96631719,
                    0.97877604,
                    0.99163647,
                    1.00490825,
                    1.01868985,
                    1.03308145,
                    1.04804654,
                    1.06358296,
                    1.07978589,
                    1.09675254,
                    1.11443202,
                    1.13283794,
                    1.15210743,
                    1.17238152,
                    1.1936131,
                    1.21580614,
                    1.23911832,
                    1.2637127,
                    1.28953393,
                    1.31659523,
                    1.34510452,
                    1.37527808,
                    1.40703973,
                    1.44041061,
                    1.47569291,
                    1.51320297,
                    1.55290001,
                    1.59478217,
                    1.63917765,
                    1.68643246,
                    1.73718211,
                    1.79121406,
                    1.84763845,
                    1.90550682,
                    1.96505624,
                    2.02670808,
                    2.0897923,
                    2.15359528,
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.M,
            np.array(
                [
                    [0.36083154, 0.46583946, 0.173329],
                    [0.0408262, 0.85495638, 0.10421742],
                    [-0.00941037, 0.18767538, 0.82173499],
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.RGB_w,
            np.array([0.97205305, 1.0, 1.04117542]),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.k,
            0.98598851,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        zip_file = idt_application.zip(
            self.get_test_output_folder(), archive_serialised_generator=False
        )
        self.assertEqual(os.path.exists(zip_file), True)

    def test_full_stops(self) -> None:
        """Test the :class:`aces.idt.IDTGeneratorToneMappedCamera.zip` method."""

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"

        archive = os.path.join(self.get_test_resources_folder(), "FULL_STOPS.zip")
        idt_application.process_archive(archive)
        idt_generator_1 = idt_application.generator
        np.testing.assert_allclose(
            idt_generator_1.LUT_decoding.table,
            np.array(
                [
                    -0.01098136,
                    -0.01086843,
                    -0.01075485,
                    -0.0106407,
                    -0.01052604,
                    -0.01041095,
                    -0.01029549,
                    -0.01017969,
                    -0.01006362,
                    -0.00994731,
                    -0.0098308,
                    -0.00971411,
                    -0.00959728,
                    -0.00948033,
                    -0.00936327,
                    -0.00924613,
                    -0.00912891,
                    -0.00901163,
                    -0.00889431,
                    -0.00877695,
                    -0.00865955,
                    -0.00854212,
                    -0.00842468,
                    -0.00830721,
                    -0.00818973,
                    -0.00807224,
                    -0.00795474,
                    -0.00783723,
                    -0.00771972,
                    -0.0076022,
                    -0.00748468,
                    -0.00736716,
                    -0.00724963,
                    -0.0071321,
                    -0.00701457,
                    -0.00689705,
                    -0.00677952,
                    -0.00666199,
                    -0.00654446,
                    -0.00642694,
                    -0.00630941,
                    -0.00619188,
                    -0.00607435,
                    -0.00595682,
                    -0.0058393,
                    -0.00572177,
                    -0.00560424,
                    -0.00548671,
                    -0.00536919,
                    -0.00525166,
                    -0.00513413,
                    -0.0050166,
                    -0.00489908,
                    -0.00478155,
                    -0.00466402,
                    -0.00454649,
                    -0.00442896,
                    -0.00431144,
                    -0.00419391,
                    -0.00407638,
                    -0.00395885,
                    -0.00384133,
                    -0.0037238,
                    -0.00360627,
                    -0.00348874,
                    -0.00337122,
                    -0.00325369,
                    -0.00313616,
                    -0.00301863,
                    -0.0029011,
                    -0.00278358,
                    -0.00266605,
                    -0.00254852,
                    -0.00243099,
                    -0.00231347,
                    -0.00219594,
                    -0.00207841,
                    -0.00196088,
                    -0.00184335,
                    -0.00172582,
                    -0.00160829,
                    -0.00149076,
                    -0.00137323,
                    -0.00125569,
                    -0.00113816,
                    -0.00102062,
                    -0.00090307,
                    -0.00078553,
                    -0.00066653,
                    -0.00054363,
                    -0.00042072,
                    -0.0002978,
                    -0.00017487,
                    -5.192e-05,
                    6.86e-05,
                    0.00017893,
                    0.00028927,
                    0.00039964,
                    0.00051005,
                    0.00062581,
                    0.00074356,
                    0.00086135,
                    0.0009792,
                    0.0010971,
                    0.00121506,
                    0.00133309,
                    0.0014512,
                    0.00156941,
                    0.00168773,
                    0.00180616,
                    0.00192472,
                    0.00204344,
                    0.00216232,
                    0.0022814,
                    0.00240068,
                    0.00252019,
                    0.00263995,
                    0.00275998,
                    0.00288031,
                    0.00300097,
                    0.00312198,
                    0.00324337,
                    0.00336517,
                    0.00348742,
                    0.00361014,
                    0.00373338,
                    0.00385716,
                    0.00398152,
                    0.0041065,
                    0.00423214,
                    0.00435847,
                    0.00448555,
                    0.0046134,
                    0.00474208,
                    0.00487163,
                    0.0050021,
                    0.00513355,
                    0.00526601,
                    0.00539955,
                    0.00553422,
                    0.00567009,
                    0.00580721,
                    0.00594565,
                    0.00608547,
                    0.00622675,
                    0.00636956,
                    0.00651398,
                    0.00666007,
                    0.00680791,
                    0.00695759,
                    0.00710918,
                    0.00726276,
                    0.0074184,
                    0.00757617,
                    0.00773615,
                    0.00789838,
                    0.00806294,
                    0.00822986,
                    0.0083992,
                    0.00857096,
                    0.00874519,
                    0.00892188,
                    0.00910104,
                    0.00928264,
                    0.00946664,
                    0.00965301,
                    0.00984166,
                    0.01003251,
                    0.01022548,
                    0.01042044,
                    0.01061729,
                    0.01081589,
                    0.01101609,
                    0.01121774,
                    0.01142068,
                    0.01162476,
                    0.0118298,
                    0.01203564,
                    0.01224214,
                    0.01244912,
                    0.01265646,
                    0.01286402,
                    0.01307168,
                    0.01327936,
                    0.01348696,
                    0.01369444,
                    0.01390177,
                    0.01410893,
                    0.01431595,
                    0.01452288,
                    0.0147298,
                    0.01493681,
                    0.01514405,
                    0.01535168,
                    0.0155599,
                    0.01576892,
                    0.01597899,
                    0.01619036,
                    0.01640331,
                    0.01661815,
                    0.01683518,
                    0.01705473,
                    0.01727712,
                    0.01750266,
                    0.0177317,
                    0.01796454,
                    0.01820148,
                    0.01844281,
                    0.01868881,
                    0.0189397,
                    0.01919571,
                    0.01945701,
                    0.01972376,
                    0.01999605,
                    0.02027395,
                    0.0205575,
                    0.02084666,
                    0.02114138,
                    0.0214416,
                    0.02174714,
                    0.0220578,
                    0.02237336,
                    0.02269357,
                    0.02301811,
                    0.02334668,
                    0.02367894,
                    0.02401452,
                    0.02435302,
                    0.02469408,
                    0.02503731,
                    0.02538231,
                    0.02572873,
                    0.02607621,
                    0.02642441,
                    0.02677304,
                    0.02712181,
                    0.0274705,
                    0.0278189,
                    0.02816688,
                    0.02851434,
                    0.02886122,
                    0.02920753,
                    0.02955335,
                    0.02989878,
                    0.03024402,
                    0.03058929,
                    0.03093489,
                    0.03128118,
                    0.03162855,
                    0.03197745,
                    0.03232841,
                    0.03268197,
                    0.03303872,
                    0.03339931,
                    0.0337644,
                    0.03413469,
                    0.03451091,
                    0.03489378,
                    0.03528406,
                    0.03568249,
                    0.03608983,
                    0.0365068,
                    0.03693412,
                    0.03737247,
                    0.03782249,
                    0.03828477,
                    0.03875987,
                    0.03924825,
                    0.03975034,
                    0.04026647,
                    0.04079688,
                    0.04134175,
                    0.04190113,
                    0.042475,
                    0.04306324,
                    0.04366561,
                    0.04426124,
                    0.04485156,
                    0.04545438,
                    0.04606929,
                    0.04669579,
                    0.04733332,
                    0.04798126,
                    0.04863892,
                    0.04930554,
                    0.04998032,
                    0.05066242,
                    0.05135096,
                    0.05204505,
                    0.05274381,
                    0.05344637,
                    0.05415182,
                    0.0548593,
                    0.05556798,
                    0.05627709,
                    0.05698587,
                    0.05769363,
                    0.05839975,
                    0.05910365,
                    0.05980485,
                    0.06050292,
                    0.06119753,
                    0.06188841,
                    0.06257537,
                    0.06325833,
                    0.06393725,
                    0.06461221,
                    0.06528334,
                    0.06595086,
                    0.06661509,
                    0.0672764,
                    0.06793524,
                    0.06859214,
                    0.06924771,
                    0.06990261,
                    0.07055757,
                    0.0712134,
                    0.07187095,
                    0.07253114,
                    0.07319492,
                    0.07386331,
                    0.07453735,
                    0.07521814,
                    0.07590676,
                    0.07660436,
                    0.07731206,
                    0.07803098,
                    0.07876226,
                    0.07950699,
                    0.08026623,
                    0.08104099,
                    0.08183223,
                    0.08264084,
                    0.08346762,
                    0.0843133,
                    0.08517849,
                    0.0860637,
                    0.08696931,
                    0.08789559,
                    0.08884269,
                    0.08981061,
                    0.09079922,
                    0.09180829,
                    0.09283744,
                    0.09388617,
                    0.09495386,
                    0.09603982,
                    0.09714322,
                    0.09826317,
                    0.09939874,
                    0.10054892,
                    0.10171267,
                    0.10288892,
                    0.10407658,
                    0.10527457,
                    0.10648182,
                    0.10769732,
                    0.10891997,
                    0.11014889,
                    0.11138316,
                    0.11262197,
                    0.11386457,
                    0.11511028,
                    0.1163585,
                    0.11760873,
                    0.11886053,
                    0.12011357,
                    0.12136758,
                    0.12262238,
                    0.12387786,
                    0.12513401,
                    0.12639087,
                    0.12764856,
                    0.12890727,
                    0.13016726,
                    0.13142886,
                    0.13269245,
                    0.13395851,
                    0.13522756,
                    0.1365002,
                    0.13777711,
                    0.13905902,
                    0.14034675,
                    0.14164119,
                    0.14294331,
                    0.14425413,
                    0.14557479,
                    0.14690646,
                    0.14825039,
                    0.1496079,
                    0.15098036,
                    0.15236919,
                    0.15377586,
                    0.15520185,
                    0.15664867,
                    0.15811782,
                    0.15961079,
                    0.16112905,
                    0.162674,
                    0.16424699,
                    0.16584929,
                    0.16748207,
                    0.16914637,
                    0.17084312,
                    0.1725731,
                    0.17433695,
                    0.17613511,
                    0.17796789,
                    0.1798354,
                    0.18173758,
                    0.18367419,
                    0.18564481,
                    0.18764885,
                    0.18968559,
                    0.19175417,
                    0.19385357,
                    0.19598267,
                    0.19814025,
                    0.20032504,
                    0.20253563,
                    0.20477066,
                    0.20702869,
                    0.20930828,
                    0.211608,
                    0.21392645,
                    0.21626228,
                    0.21861427,
                    0.2209811,
                    0.22336163,
                    0.2257548,
                    0.22815965,
                    0.23057531,
                    0.23300101,
                    0.23543612,
                    0.23788007,
                    0.24033244,
                    0.24279288,
                    0.24526118,
                    0.24773721,
                    0.25022098,
                    0.25271256,
                    0.25521215,
                    0.25772006,
                    0.2602367,
                    0.26276257,
                    0.2652983,
                    0.26784463,
                    0.27040243,
                    0.27297266,
                    0.27555644,
                    0.27815498,
                    0.28076965,
                    0.28340195,
                    0.28605348,
                    0.28872601,
                    0.29142142,
                    0.2941417,
                    0.29688897,
                    0.29966544,
                    0.30247343,
                    0.30531532,
                    0.30819355,
                    0.31111057,
                    0.31406888,
                    0.31707094,
                    0.32011917,
                    0.32321592,
                    0.32636344,
                    0.32956386,
                    0.33281914,
                    0.33613106,
                    0.33950117,
                    0.34293081,
                    0.34642105,
                    0.34997269,
                    0.35358623,
                    0.35726189,
                    0.36099959,
                    0.36479894,
                    0.36865929,
                    0.37257968,
                    0.37655894,
                    0.38059562,
                    0.38468806,
                    0.38883445,
                    0.39303282,
                    0.39728112,
                    0.40157714,
                    0.40591868,
                    0.41030353,
                    0.41472951,
                    0.41919452,
                    0.42369658,
                    0.42823384,
                    0.43280459,
                    0.43740734,
                    0.44204085,
                    0.44670394,
                    0.45139575,
                    0.45611566,
                    0.46086327,
                    0.46563843,
                    0.47044122,
                    0.47527194,
                    0.48013109,
                    0.48501937,
                    0.48993767,
                    0.49488703,
                    0.49986863,
                    0.5048838,
                    0.50993398,
                    0.51502068,
                    0.52014551,
                    0.52531012,
                    0.53051622,
                    0.53576555,
                    0.54105989,
                    0.54640103,
                    0.55179075,
                    0.55723087,
                    0.56272317,
                    0.56826945,
                    0.57387149,
                    0.57953106,
                    0.5852499,
                    0.59102976,
                    0.59687234,
                    0.60277933,
                    0.60875239,
                    0.61479316,
                    0.62090322,
                    0.62708412,
                    0.63333736,
                    0.63966437,
                    0.64606654,
                    0.65254516,
                    0.65910146,
                    0.66573657,
                    0.67245153,
                    0.67924728,
                    0.68612461,
                    0.69308424,
                    0.70012674,
                    0.70725255,
                    0.71446199,
                    0.72175525,
                    0.72913238,
                    0.73659329,
                    0.74413783,
                    0.75176572,
                    0.7594766,
                    0.76727001,
                    0.77514545,
                    0.78310235,
                    0.79114013,
                    0.79925812,
                    0.80745583,
                    0.81573269,
                    0.82408819,
                    0.83252188,
                    0.84103342,
                    0.84962256,
                    0.85828922,
                    0.8670334,
                    0.87585526,
                    0.88475511,
                    0.89373341,
                    0.90279072,
                    0.91192781,
                    0.92114561,
                    0.93044518,
                    0.93982773,
                    0.9492946,
                    0.95884725,
                    0.96848725,
                    0.97821625,
                    0.98803601,
                    0.99794832,
                    1.00795507,
                    1.01805817,
                    1.02825958,
                    1.03856129,
                    1.04896528,
                    1.05947355,
                    1.07008813,
                    1.08081102,
                    1.09164422,
                    1.10258974,
                    1.11364957,
                    1.12482572,
                    1.13612017,
                    1.14753491,
                    1.15907193,
                    1.1707332,
                    1.18252072,
                    1.19443647,
                    1.20648242,
                    1.21866055,
                    1.23097284,
                    1.24342124,
                    1.25600769,
                    1.26873412,
                    1.28160241,
                    1.2946144,
                    1.30777191,
                    1.32107666,
                    1.33453032,
                    1.3481345,
                    1.36189069,
                    1.37580029,
                    1.38986462,
                    1.40408486,
                    1.41846208,
                    1.43299724,
                    1.44769117,
                    1.46254458,
                    1.47755808,
                    1.49273217,
                    1.50806725,
                    1.52356362,
                    1.53922153,
                    1.55504116,
                    1.57102266,
                    1.58716617,
                    1.60347184,
                    1.61993978,
                    1.63657032,
                    1.65336375,
                    1.67032044,
                    1.68744089,
                    1.70472571,
                    1.72217567,
                    1.7397917,
                    1.7575749,
                    1.77552654,
                    1.79364809,
                    1.81194119,
                    1.83040767,
                    1.84904953,
                    1.86786893,
                    1.88686824,
                    1.90604995,
                    1.92541669,
                    1.94497122,
                    1.96471641,
                    1.98465521,
                    2.00479065,
                    2.02512584,
                    2.04566388,
                    2.06640796,
                    2.08736124,
                    2.1085269,
                    2.12990811,
                    2.15150801,
                    2.17332974,
                    2.19537639,
                    2.21765102,
                    2.24015665,
                    2.26289626,
                    2.28587281,
                    2.3090892,
                    2.33254832,
                    2.356253,
                    2.38020608,
                    2.40441034,
                    2.42886858,
                    2.45358355,
                    2.47855802,
                    2.50379474,
                    2.52929646,
                    2.55506595,
                    2.58110597,
                    2.6074193,
                    2.63400872,
                    2.66087704,
                    2.68802708,
                    2.71546169,
                    2.74318371,
                    2.77119604,
                    2.79950157,
                    2.82810322,
                    2.85700394,
                    2.88620669,
                    2.91571447,
                    2.94553029,
                    2.97565718,
                    3.00609819,
                    3.0368564,
                    3.06793491,
                    3.09933685,
                    3.13106535,
                    3.16312355,
                    3.19551466,
                    3.22824189,
                    3.2613085,
                    3.29471778,
                    3.32847304,
                    3.36257761,
                    3.39703484,
                    3.43184812,
                    3.46702086,
                    3.50255653,
                    3.53845862,
                    3.57473068,
                    3.61137627,
                    3.64839903,
                    3.68580264,
                    3.7235908,
                    3.76176728,
                    3.80033591,
                    3.83930056,
                    3.87866517,
                    3.91843372,
                    3.95861025,
                    3.99919886,
                    4.04020371,
                    4.08162901,
                    4.12347902,
                    4.16575808,
                    4.20847056,
                    4.25162089,
                    4.29521356,
                    4.3392531,
                    4.38374411,
                    4.42869122,
                    4.47409911,
                    4.51997251,
                    4.56631619,
                    4.61313496,
                    4.66043368,
                    4.70821724,
                    4.75649057,
                    4.80525863,
                    4.85452643,
                    4.904299,
                    4.9545814,
                    5.00537875,
                    5.05669618,
                    5.10853887,
                    5.16091201,
                    5.21382086,
                    5.2672707,
                    5.32126684,
                    5.37581465,
                    5.43091953,
                    5.48658693,
                    5.54282235,
                    5.59963134,
                    5.65701949,
                    5.71499246,
                    5.77355597,
                    5.83271579,
                    5.89247776,
                    5.9528478,
                    6.01383189,
                    6.07543609,
                    6.13766652,
                    6.2005294,
                    6.26403104,
                    6.3281778,
                    6.39297615,
                    6.45843265,
                    6.52455394,
                    6.59134676,
                    6.65881793,
                    6.72697438,
                    6.79582312,
                    6.86537125,
                    6.93562597,
                    7.00659459,
                    7.07828448,
                    7.15070312,
                    7.22385808,
                    7.29775702,
                    7.37240769,
                    7.44781794,
                    7.52399568,
                    7.60094894,
                    7.6786858,
                    7.75721447,
                    7.83654321,
                    7.91668037,
                    7.99763439,
                    8.0794138,
                    8.16202719,
                    8.24548327,
                    8.32979079,
                    8.41495861,
                    8.50099566,
                    8.58791097,
                    8.67571364,
                    8.76441285,
                    8.85401789,
                    8.94453812,
                    9.03598298,
                    9.12836201,
                    9.22168485,
                    9.3159612,
                    9.41120089,
                    9.50741381,
                    9.60460998,
                    9.70279948,
                    9.80199252,
                    9.90219938,
                    10.00343047,
                    10.10569628,
                    10.20900741,
                    10.31337458,
                    10.41880859,
                    10.52532037,
                    10.63292095,
                    10.74162148,
                    10.8514332,
                    10.96236748,
                    11.07443582,
                    11.18764979,
                    11.30202114,
                    11.41756168,
                    11.53428338,
                    11.65219831,
                    11.77131867,
                    11.89165679,
                    12.01322513,
                    12.13603625,
                    12.26010286,
                    12.38543781,
                    12.51205405,
                    12.63996468,
                    12.76918295,
                    12.89972221,
                    13.03159597,
                    13.16481787,
                    13.29940171,
                    13.43536139,
                    13.57271098,
                    13.7114647,
                    13.8516369,
                    13.99324208,
                    14.13629489,
                    14.28081012,
                    14.42680273,
                    14.57428783,
                    14.72328066,
                    14.87379665,
                    15.02585136,
                    15.17946052,
                    15.33464003,
                    15.49140593,
                    15.64977446,
                    15.80976198,
                    15.97138506,
                    16.13466041,
                    16.29960492,
                    16.46623565,
                    16.63456985,
                    16.80462493,
                    16.97641849,
                    17.14996828,
                    17.32529228,
                    17.50240861,
                    17.68133559,
                    17.86209175,
                    18.04469578,
                    18.22916657,
                    18.4155232,
                    18.60378495,
                    18.7939713,
                    18.98610193,
                    19.1801967,
                    19.3762757,
                    19.57435922,
                    19.77446775,
                    19.97662198,
                    20.18084283,
                    20.38715143,
                    20.59556913,
                    20.80611747,
                    21.01881825,
                    21.23369347,
                    21.45076536,
                    21.67005636,
                    21.89158919,
                    22.11538673,
                    22.34147216,
                    22.56986886,
                    22.80060046,
                    23.03369082,
                    23.26916407,
                    23.50704455,
                    23.74735689,
                    23.99012594,
                    24.23537681,
                    24.48313488,
                    24.73342578,
                    24.9862754,
                    25.24170991,
                    25.49975571,
                    25.76043952,
                    26.0237883,
                    26.28982928,
                    26.55859001,
                    26.83009827,
                    27.10438216,
                    27.38147005,
                    27.66139061,
                    27.94417279,
                    28.22984586,
                    28.51843936,
                    28.80998314,
                    29.10450738,
                    29.40204254,
                    29.70261939,
                    30.00626904,
                    30.3130229,
                    30.6229127,
                    30.9359705,
                    31.25222869,
                    31.57171999,
                    31.89447744,
                    32.22053444,
                    32.54992471,
                    32.88268234,
                    33.21884175,
                    33.55843772,
                    33.90150537,
                    34.2480802,
                    34.59819806,
                    34.95189518,
                    35.30920813,
                    35.6701739,
                    36.03482981,
                    36.4032136,
                    36.77536337,
                    37.15131763,
                    37.53111527,
                    37.91479557,
                    38.30239824,
                    38.69396336,
                    39.08953145,
                    39.48914343,
                    39.89284064,
                    40.30066485,
                    40.71265823,
                    41.12886343,
                    41.54932348,
                    41.9740819,
                    42.40318262,
                    42.83667003,
                    43.27458898,
                    43.71698477,
                    44.16390317,
                    44.61539041,
                    45.07149321,
                    45.53225874,
                    45.99773467,
                    46.46796916,
                    46.94301085,
                    47.42290889,
                    47.90771292,
                    48.39747311,
                    48.8922401,
                    49.3920651,
                    49.8969998,
                    50.40709645,
                    50.92240781,
                    51.4429872,
                    51.96888846,
                    52.50016601,
                    53.0368748,
                    53.57907037,
                    54.12680879,
                    54.68014674,
                    55.23914147,
                    55.80385079,
                    56.37433313,
                    56.9506475,
                    57.53285353,
                    58.12101145,
                    58.71518211,
                    59.31542697,
                    59.92180812,
                    60.53438831,
                    61.15323089,
                    61.77839991,
                    62.40996001,
                    63.04797656,
                    63.69251554,
                    64.34364364,
                    65.00142821,
                    65.66593732,
                    66.33723969,
                    67.01540478,
                    67.70049191,
                    68.39255805,
                    69.09166789,
                    69.79788512,
                    70.51127194,
                    71.23188869,
                    71.95979318,
                    72.69504004,
                    73.43767994,
                    74.18775858,
                    74.9453156,
                    75.71038327,
                    76.48298502,
                    77.26313364,
                    78.05082937,
                    78.84605763,
                    79.64878647,
                    80.45896374,
                    81.27651396,
                    82.10133475,
                    82.93329305,
                    83.7722209,
                    84.61791092,
                    85.47011146,
                    86.32852142,
                    87.19278486,
                    88.0624853,
                    88.93713991,
                    89.81619361,
                    90.69901307,
                    91.58488089,
                    92.47298992,
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.M,
            np.array(
                [
                    [0.75343735, 0.1212353, 0.12532735],
                    [0.00252322, 1.03138878, -0.03391201],
                    [-0.05482966, -0.18695237, 1.24178203],
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.RGB_w,
            np.array([0.91565078, 1.0, 0.98353366]),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )
        np.testing.assert_allclose(
            idt_generator_1.k,
            0.995181598485,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        zip_file = idt_application.zip(
            self.get_test_output_folder(), archive_serialised_generator=False
        )
        self.assertEqual(os.path.exists(zip_file), True)

    def test_dpx_log10(self) -> None:
        """Test the :class:`aces.idt.IDTGeneratorToneMappedCamera.zip` method."""

        idt_application = IDTGeneratorApplication()
        idt_application.generator = "IDTGeneratorLogCamera"

        archive = os.path.join(self.get_test_resources_folder(), "DPX_10_log.zip")
        idt_application.process_archive(archive)
        idt_generator_1 = idt_application.generator
        np.testing.assert_allclose(
            idt_generator_1.LUT_decoding.table,
            np.array(
                [
                    -0.03054982,
                    -0.03023468,
                    -0.02991771,
                    -0.02959914,
                    -0.02927917,
                    -0.02895799,
                    -0.02863575,
                    -0.02831261,
                    -0.02798868,
                    -0.0276641,
                    -0.02733894,
                    -0.0270133,
                    -0.02668726,
                    -0.02636087,
                    -0.02603419,
                    -0.02570728,
                    -0.02538016,
                    -0.02505288,
                    -0.02472546,
                    -0.02439792,
                    -0.0240703,
                    -0.0237426,
                    -0.02341484,
                    -0.02308703,
                    -0.02275917,
                    -0.02243129,
                    -0.02210338,
                    -0.02177545,
                    -0.0214475,
                    -0.02111954,
                    -0.02079157,
                    -0.02046359,
                    -0.02013561,
                    -0.01980762,
                    -0.01947964,
                    -0.01915165,
                    -0.01882366,
                    -0.01849568,
                    -0.01816769,
                    -0.0178397,
                    -0.01751172,
                    -0.01718373,
                    -0.01685574,
                    -0.01652776,
                    -0.01619977,
                    -0.01587179,
                    -0.0155438,
                    -0.01521582,
                    -0.01488784,
                    -0.01455987,
                    -0.0142319,
                    -0.01390393,
                    -0.01357596,
                    -0.01324801,
                    -0.01292006,
                    -0.01259212,
                    -0.01226419,
                    -0.01193628,
                    -0.01160839,
                    -0.01128051,
                    -0.01095267,
                    -0.01062485,
                    -0.01029707,
                    -0.00996934,
                    -0.00964165,
                    -0.00931403,
                    -0.00898648,
                    -0.00865901,
                    -0.00833164,
                    -0.00800438,
                    -0.00767725,
                    -0.00735027,
                    -0.00702346,
                    -0.00669684,
                    -0.00637045,
                    -0.0060443,
                    -0.00571844,
                    -0.0053929,
                    -0.00506771,
                    -0.00474291,
                    -0.00441856,
                    -0.00409469,
                    -0.00377135,
                    -0.0034486,
                    -0.00312648,
                    -0.00280506,
                    -0.00248439,
                    -0.00216452,
                    -0.00184552,
                    -0.00152744,
                    -0.00121035,
                    -0.00089429,
                    -0.00057933,
                    -0.00027183,
                    3.021e-05,
                    0.00035849,
                    0.00066859,
                    0.00097738,
                    0.00128483,
                    0.00159093,
                    0.00189565,
                    0.002199,
                    0.00250098,
                    0.00280162,
                    0.00310093,
                    0.00339896,
                    0.00369576,
                    0.00399138,
                    0.0042859,
                    0.0045794,
                    0.00487197,
                    0.00516371,
                    0.00545473,
                    0.00574516,
                    0.00603512,
                    0.00632475,
                    0.00661418,
                    0.00690356,
                    0.00719304,
                    0.00748276,
                    0.00777288,
                    0.00806354,
                    0.0083549,
                    0.00864709,
                    0.00894027,
                    0.00923455,
                    0.00953007,
                    0.00982696,
                    0.01012531,
                    0.01042524,
                    0.01072685,
                    0.01103021,
                    0.0113354,
                    0.0116425,
                    0.01195154,
                    0.01226259,
                    0.01257568,
                    0.01289084,
                    0.01320808,
                    0.01352743,
                    0.01384889,
                    0.01417245,
                    0.01449816,
                    0.01482596,
                    0.01515586,
                    0.01548784,
                    0.01582188,
                    0.01615796,
                    0.01649606,
                    0.01683617,
                    0.01717827,
                    0.01752233,
                    0.01786834,
                    0.01821628,
                    0.01856614,
                    0.0189179,
                    0.01927156,
                    0.0196271,
                    0.01998453,
                    0.02034383,
                    0.02070501,
                    0.02106808,
                    0.02143305,
                    0.02180609,
                    0.02220399,
                    0.02260491,
                    0.02300882,
                    0.02341568,
                    0.02382547,
                    0.02423816,
                    0.02465375,
                    0.02507224,
                    0.02549363,
                    0.02591796,
                    0.02634528,
                    0.02677563,
                    0.02720908,
                    0.02764571,
                    0.02808563,
                    0.02852894,
                    0.02897576,
                    0.02942625,
                    0.02988054,
                    0.03033881,
                    0.0308012,
                    0.03126789,
                    0.03173906,
                    0.03221487,
                    0.0326955,
                    0.03318111,
                    0.03367185,
                    0.03416787,
                    0.03466935,
                    0.03517637,
                    0.03568904,
                    0.03620744,
                    0.03673165,
                    0.03726171,
                    0.03779766,
                    0.0383395,
                    0.03888724,
                    0.03944085,
                    0.0400003,
                    0.04056555,
                    0.04113653,
                    0.04171319,
                    0.04229545,
                    0.04288325,
                    0.04347652,
                    0.04407519,
                    0.04467923,
                    0.04528858,
                    0.0459032,
                    0.04652309,
                    0.04714824,
                    0.04777866,
                    0.0484144,
                    0.0490555,
                    0.04970205,
                    0.05035414,
                    0.05101188,
                    0.0516754,
                    0.05234485,
                    0.0530204,
                    0.05370222,
                    0.0543905,
                    0.05508543,
                    0.05578721,
                    0.05649606,
                    0.05721217,
                    0.05793575,
                    0.05866697,
                    0.05940603,
                    0.06015313,
                    0.06090845,
                    0.06167214,
                    0.06244437,
                    0.06322527,
                    0.06401497,
                    0.06481358,
                    0.06562119,
                    0.0664379,
                    0.06726377,
                    0.06809887,
                    0.06894324,
                    0.06979693,
                    0.07065998,
                    0.07153241,
                    0.07241426,
                    0.07330556,
                    0.07420633,
                    0.07511662,
                    0.07603652,
                    0.07696603,
                    0.0779052,
                    0.0788541,
                    0.07981281,
                    0.08078139,
                    0.08175994,
                    0.08274855,
                    0.08374731,
                    0.08475633,
                    0.08577571,
                    0.08680554,
                    0.08784594,
                    0.08889697,
                    0.08995873,
                    0.09103128,
                    0.09211464,
                    0.09320888,
                    0.09431401,
                    0.09543004,
                    0.09655695,
                    0.0976947,
                    0.09884325,
                    0.10000252,
                    0.10117246,
                    0.10235297,
                    0.10354397,
                    0.1047454,
                    0.10595719,
                    0.10717929,
                    0.10841168,
                    0.10965436,
                    0.11090736,
                    0.11217076,
                    0.11344468,
                    0.11472928,
                    0.11602475,
                    0.11733137,
                    0.11864943,
                    0.11997927,
                    0.1213213,
                    0.12267592,
                    0.12404358,
                    0.12542471,
                    0.12681984,
                    0.12822951,
                    0.12965424,
                    0.13109452,
                    0.13255086,
                    0.13402374,
                    0.13551359,
                    0.13702084,
                    0.13854587,
                    0.14008904,
                    0.14165065,
                    0.14323094,
                    0.14483016,
                    0.14644847,
                    0.14808602,
                    0.14974293,
                    0.15141929,
                    0.15311517,
                    0.15483063,
                    0.15656572,
                    0.1583205,
                    0.16009491,
                    0.16188906,
                    0.16370307,
                    0.16553704,
                    0.16739104,
                    0.16926525,
                    0.1711598,
                    0.17307486,
                    0.17501056,
                    0.17696708,
                    0.17894461,
                    0.1809433,
                    0.18296332,
                    0.18500479,
                    0.18706785,
                    0.18915256,
                    0.19125898,
                    0.19338711,
                    0.19553693,
                    0.19770834,
                    0.19990124,
                    0.20211547,
                    0.20435082,
                    0.20660706,
                    0.20888392,
                    0.21118111,
                    0.21349832,
                    0.21583524,
                    0.21819156,
                    0.22056696,
                    0.22296114,
                    0.22537383,
                    0.22780479,
                    0.2302538,
                    0.23272068,
                    0.23520529,
                    0.23770753,
                    0.24022734,
                    0.24276468,
                    0.24531956,
                    0.24789202,
                    0.25048212,
                    0.25308992,
                    0.25571555,
                    0.25835908,
                    0.26102059,
                    0.26370015,
                    0.26639786,
                    0.2691138,
                    0.27184801,
                    0.27460052,
                    0.27737136,
                    0.28016053,
                    0.28296802,
                    0.28579383,
                    0.28863796,
                    0.29150041,
                    0.29438121,
                    0.29728044,
                    0.30019819,
                    0.30313461,
                    0.30608995,
                    0.30906448,
                    0.3120586,
                    0.31507275,
                    0.31810757,
                    0.32116375,
                    0.32424196,
                    0.32734307,
                    0.3304683,
                    0.3336188,
                    0.33679589,
                    0.34000097,
                    0.34323555,
                    0.34650129,
                    0.34979988,
                    0.3531331,
                    0.35650284,
                    0.35991104,
                    0.36335969,
                    0.36685081,
                    0.37038645,
                    0.37396866,
                    0.37759947,
                    0.38128088,
                    0.38501488,
                    0.38880336,
                    0.39264817,
                    0.39655106,
                    0.40051367,
                    0.40453756,
                    0.40862412,
                    0.4127746,
                    0.41699011,
                    0.42127158,
                    0.42561976,
                    0.43003523,
                    0.43451836,
                    0.43906931,
                    0.44368805,
                    0.44837433,
                    0.45312769,
                    0.45794744,
                    0.46283269,
                    0.46778234,
                    0.47279508,
                    0.47786945,
                    0.48300377,
                    0.48819617,
                    0.4934446,
                    0.49874696,
                    0.504101,
                    0.5095044,
                    0.51495479,
                    0.52044976,
                    0.52598692,
                    0.53156387,
                    0.53717832,
                    0.54282805,
                    0.54851096,
                    0.55422512,
                    0.55996877,
                    0.56574036,
                    0.57153858,
                    0.57736239,
                    0.583211,
                    0.58908391,
                    0.59498093,
                    0.60090219,
                    0.60684819,
                    0.61281961,
                    0.61881742,
                    0.624843,
                    0.63089797,
                    0.63698425,
                    0.64310399,
                    0.64925961,
                    0.65545373,
                    0.66168919,
                    0.66796893,
                    0.67429606,
                    0.68067374,
                    0.68710525,
                    0.69359385,
                    0.7001428,
                    0.70675541,
                    0.7134349,
                    0.72018445,
                    0.72700715,
                    0.73390595,
                    0.7408837,
                    0.74794309,
                    0.75508664,
                    0.76231673,
                    0.76963555,
                    0.77704509,
                    0.7845472,
                    0.79214353,
                    0.79983562,
                    0.80762478,
                    0.81551222,
                    0.823499,
                    0.83158605,
                    0.83977424,
                    0.84806432,
                    0.85645699,
                    0.86495293,
                    0.87355275,
                    0.8822571,
                    0.89106659,
                    0.89998189,
                    0.90900366,
                    0.91813263,
                    0.92736956,
                    0.93671525,
                    0.94617054,
                    0.9557363,
                    0.96541344,
                    0.97520291,
                    0.98510562,
                    0.99512251,
                    1.00525447,
                    1.01550232,
                    1.02586685,
                    1.03634872,
                    1.04694853,
                    1.0576667,
                    1.06850354,
                    1.07945919,
                    1.09053362,
                    1.10172664,
                    1.11303787,
                    1.12446677,
                    1.13601263,
                    1.14767461,
                    1.15945172,
                    1.17134299,
                    1.18334724,
                    1.19546307,
                    1.20768926,
                    1.22002464,
                    1.23246805,
                    1.24501849,
                    1.25767505,
                    1.27043703,
                    1.28330396,
                    1.2962756,
                    1.30935196,
                    1.32253335,
                    1.33582043,
                    1.34921416,
                    1.36271583,
                    1.3763271,
                    1.39004993,
                    1.40388659,
                    1.41783968,
                    1.43191203,
                    1.44610675,
                    1.46042713,
                    1.47487664,
                    1.48945893,
                    1.50417771,
                    1.51903678,
                    1.53403996,
                    1.54919107,
                    1.56449386,
                    1.57995203,
                    1.59556919,
                    1.61134881,
                    1.62729424,
                    1.64340864,
                    1.65969504,
                    1.67615627,
                    1.692795,
                    1.70961372,
                    1.72661477,
                    1.7438003,
                    1.76117234,
                    1.77873277,
                    1.79648336,
                    1.81442575,
                    1.83256151,
                    1.85089212,
                    1.86941902,
                    1.88814357,
                    1.90706715,
                    1.92619108,
                    1.94551671,
                    1.96504539,
                    1.9847785,
                    2.00471743,
                    2.02486364,
                    2.04521863,
                    2.06578396,
                    2.08656126,
                    2.10755223,
                    2.12875864,
                    2.15018233,
                    2.17182524,
                    2.19368939,
                    2.2157769,
                    2.23808995,
                    2.26063084,
                    2.28340197,
                    2.3064058,
                    2.32964492,
                    2.35312195,
                    2.37683963,
                    2.40080081,
                    2.42500842,
                    2.44946546,
                    2.47417502,
                    2.49914028,
                    2.52436447,
                    2.54985083,
                    2.57560266,
                    2.6016233,
                    2.6279161,
                    2.65448445,
                    2.68133175,
                    2.70846138,
                    2.73587674,
                    2.76358119,
                    2.79157808,
                    2.81987073,
                    2.8484624,
                    2.87735631,
                    2.90655563,
                    2.93606347,
                    2.96588291,
                    2.99601696,
                    3.02646856,
                    3.05724061,
                    3.08833594,
                    3.11975735,
                    3.15150755,
                    3.18358923,
                    3.21600502,
                    3.24875754,
                    3.28184938,
                    3.31528308,
                    3.34906121,
                    3.38318629,
                    3.41766085,
                    3.45248741,
                    3.4876685,
                    3.52320665,
                    3.55910438,
                    3.59536424,
                    3.63198876,
                    3.6689805,
                    3.706342,
                    3.74407583,
                    3.78218453,
                    3.82067066,
                    3.85953675,
                    3.89878535,
                    3.938419,
                    3.9784402,
                    4.01885147,
                    4.05965528,
                    4.10085411,
                    4.14245042,
                    4.18444664,
                    4.2268452,
                    4.26964852,
                    4.312859,
                    4.35647905,
                    4.40051109,
                    4.44495752,
                    4.4898208,
                    4.53510339,
                    4.5808078,
                    4.62693657,
                    4.67349234,
                    4.72047778,
                    4.76789567,
                    4.8157489,
                    4.8640405,
                    4.91277359,
                    4.96195151,
                    5.01157773,
                    5.06165595,
                    5.11219008,
                    5.16318426,
                    5.21464293,
                    5.26657077,
                    5.3189728,
                    5.37185436,
                    5.42522114,
                    5.47907917,
                    5.53343491,
                    5.58829516,
                    5.64366717,
                    5.6995586,
                    5.7559775,
                    5.81293238,
                    5.87043214,
                    5.92848614,
                    5.98710412,
                    6.04629623,
                    6.10607298,
                    6.16644528,
                    6.22742432,
                    6.28902164,
                    6.35124904,
                    6.41411857,
                    6.47764248,
                    6.5418332,
                    6.60670329,
                    6.67226542,
                    6.73853231,
                    6.8055167,
                    6.87323131,
                    6.94168884,
                    7.01090187,
                    7.08088287,
                    7.15164418,
                    7.22319797,
                    7.2955562,
                    7.36873064,
                    7.44273281,
                    7.517574,
                    7.59326524,
                    7.66981731,
                    7.74724073,
                    7.82554576,
                    7.90474237,
                    7.98484033,
                    8.0658491,
                    8.14777793,
                    8.23063583,
                    8.31443159,
                    8.39917378,
                    8.48487077,
                    8.57153076,
                    8.65916176,
                    8.74777163,
                    8.83736808,
                    8.9279587,
                    9.01955095,
                    9.11215217,
                    9.20576963,
                    9.3004105,
                    9.39608189,
                    9.49279083,
                    9.59054431,
                    9.68934929,
                    9.78921268,
                    9.89014138,
                    9.99214227,
                    10.09522222,
                    10.19938813,
                    10.30464689,
                    10.41100543,
                    10.5184707,
                    10.62704972,
                    10.73674954,
                    10.8475773,
                    10.95954019,
                    11.07264552,
                    11.18690068,
                    11.30231321,
                    11.41889074,
                    11.53664108,
                    11.65557221,
                    11.77569226,
                    11.89700957,
                    12.01953266,
                    12.1432703,
                    12.2682315,
                    12.39442552,
                    12.5218619,
                    12.65055046,
                    12.78050136,
                    12.91172502,
                    13.04423224,
                    13.17803413,
                    13.31314217,
                    13.44956821,
                    13.58732443,
                    13.72642343,
                    13.86687815,
                    14.00870193,
                    14.15190849,
                    14.29651191,
                    14.44252665,
                    14.58996757,
                    14.73884984,
                    14.88918902,
                    15.04100099,
                    15.19430198,
                    15.34910853,
                    15.50543748,
                    15.66330597,
                    15.82273141,
                    15.98373147,
                    16.14632408,
                    16.31052739,
                    16.47635977,
                    16.64383978,
                    16.81298619,
                    16.98381795,
                    17.15635415,
                    17.33061405,
                    17.50661706,
                    17.68438272,
                    17.8639307,
                    18.04528081,
                    18.22845295,
                    18.41346718,
                    18.60034364,
                    18.78910259,
                    18.97976443,
                    19.17234964,
                    19.36687886,
                    19.56337282,
                    19.76185239,
                    19.96233857,
                    20.16485248,
                    20.36941541,
                    20.57604876,
                    20.78477412,
                    20.99561321,
                    21.20858792,
                    21.42372032,
                    21.64103265,
                    21.86054732,
                    22.08228696,
                    22.30627437,
                    22.53253254,
                    22.76108469,
                    22.99195425,
                    23.22516484,
                    23.46074033,
                    23.6987048,
                    23.93908256,
                    24.18189815,
                    24.42717636,
                    24.67494222,
                    24.92522099,
                    25.1780382,
                    25.43341963,
                    25.6913913,
                    25.95197951,
                    26.21521081,
                    26.48111202,
                    26.74971023,
                    27.02103281,
                    27.29510739,
                    27.57196191,
                    27.85162454,
                    28.1341238,
                    28.41948843,
                    28.70774752,
                    28.99893043,
                    29.2930668,
                    29.59018661,
                    29.8903201,
                    30.19349784,
                    30.49975073,
                    30.80910993,
                    31.12160697,
                    31.43727367,
                    31.75614218,
                    32.07824498,
                    32.40361486,
                    32.73228498,
                    33.0642888,
                    33.39966013,
                    33.73843314,
                    34.08064233,
                    34.42632255,
                    34.77550901,
                    35.12823726,
                    35.48454324,
                    35.84446324,
                    36.20803391,
                    36.57529227,
                    36.94627575,
                    37.32102211,
                    37.69956952,
                    38.08195654,
                    38.46822212,
                    38.8584056,
                    39.25254671,
                    39.65068559,
                    40.0528628,
                    40.4591193,
                    40.86949645,
                    41.28403607,
                    41.70278037,
                    42.12577199,
                    42.55305402,
                    42.98466998,
                    43.42066382,
                    43.86107994,
                    44.30596322,
                    44.75535894,
                    45.20931289,
                    45.6678713,
                    46.13108087,
                    46.59898878,
                    47.07164269,
                    47.54909072,
                    48.03138152,
                    48.51856419,
                    49.01068836,
                    49.50780415,
                    50.00996219,
                    50.51721362,
                    51.02961011,
                    51.54720384,
                    52.07004752,
                    52.59819442,
                    53.13169831,
                    53.67061354,
                    54.21499498,
                    54.76489809,
                    55.32037888,
                    55.88149391,
                    56.44830033,
                    57.02085588,
                    57.59921886,
                    58.18344818,
                    58.77360334,
                    59.36974446,
                    59.97193223,
                    60.580228,
                    61.19469372,
                    61.81539197,
                    62.44238597,
                    63.07573957,
                    63.71551729,
                    64.36178427,
                    65.01460634,
                    65.67405,
                    66.34018239,
                    67.01307138,
                    67.69278548,
                    68.37939392,
                    69.07296664,
                    69.77357427,
                    70.48128818,
                    71.19618043,
                    71.91832383,
                    72.64779195,
                    73.38465906,
                    74.12900022,
                    74.88089125,
                    75.6404087,
                    76.40762995,
                    77.18263313,
                    77.96549718,
                    78.75630181,
                    79.55512759,
                    80.36205586,
                    81.17716882,
                    82.00054947,
                    82.83228167,
                    83.67245014,
                    84.52114045,
                    85.37843903,
                    86.2444332,
                    87.11921115,
                    88.00286198,
                    88.89547569,
                    89.79714318,
                    90.7079563,
                    91.6280078,
                    92.55739139,
                    93.49620172,
                    94.44453442,
                    95.40248606,
                    96.37015421,
                    97.34763743,
                    98.33503527,
                    99.33244829,
                    100.33997808,
                    101.35772725,
                    102.38579946,
                    103.42429941,
                    104.47333288,
                    105.5330067,
                    106.6034288,
                    107.6847082,
                    108.77695503,
                    109.88028052,
                    110.99479706,
                    112.12061814,
                    113.25785843,
                    114.40663376,
                    115.56706113,
                    116.73925873,
                    117.92334593,
                    119.11944334,
                    120.32767277,
                    121.54815728,
                    122.78102118,
                    124.02639002,
                    125.28439065,
                    126.55515119,
                    127.83880107,
                    129.13547101,
                    130.44529309,
                    131.76840071,
                    133.10492861,
                    134.45501293,
                    135.81879116,
                    137.19640221,
                    138.58798638,
                    139.99368539,
                    141.41364242,
                    142.84800209,
                    144.29691047,
                    145.7604921,
                    147.23886648,
                    148.73216952,
                    150.24053491,
                    151.76409323,
                    153.302971,
                    154.85728937,
                    156.42716273,
                    158.01269693,
                    159.61398729,
                    161.23111622,
                    162.86415042,
                    164.51313771,
                    166.17810334,
                    167.85904581,
                    169.55593205,
                    171.26869208,
                    172.99721294,
                    174.74133198,
                    176.50082939,
                    178.27542007,
                    180.0647447,
                    181.86836013,
                    183.68572903,
                    185.51620896,
                    187.35904081,
                    189.21333676,
                    191.07806792,
                    192.95205171,
                    194.83393925,
                    196.72220284,
                    198.61512396,
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.M,
            np.array(
                [
                    [0.72395019, 0.15830839, 0.11774141],
                    [-0.00540176, 1.04496633, -0.03956457],
                    [-0.05106021, -0.23732028, 1.28838049],
                ]
            ),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.RGB_w,
            np.array([0.92134068, 1.0, 1.05466533]),
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        np.testing.assert_allclose(
            idt_generator_1.k,
            1.19611888,
            atol=TOLERANCE_ABSOLUTE_TESTS,
        )

        zip_file = idt_application.zip(
            self.get_test_output_folder(), archive_serialised_generator=False
        )
        self.assertEqual(os.path.exists(zip_file), True)
